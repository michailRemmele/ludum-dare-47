(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[1],Array(246).concat([function(e,n,t){"use strict";t.r(n),t.d(n,"onInit",function(){return p}),t.d(n,"onDestroy",function(){return m});var a=t(247),r=t.n(a),o=t(252),s=t.n(o),i=t(258),c=t(277),u=t(358),l=t(364);function p(e){const{sceneName:n,messageBusObserver:t,storeObserver:a,pushMessage:o,pushAction:p,gameObjects:m}=e;s.a.render(r.a.createElement(c.GameProvider,{messageBusObserver:t,storeObserver:a,pushMessage:o,pushAction:p,gameObjects:m},r.a.createElement(i.MemoryRouter,null,r.a.createElement(c.SceneSwitcher,{sceneName:n},r.a.createElement(i.Switch,null,r.a.createElement(i.Route,{path:"/mainMenu"},r.a.createElement(u.MainMenu,null)),r.a.createElement(i.Route,{path:"/game"},r.a.createElement(l.Game,null)))))),document.getElementById("ui-root"))}function m(){s.a.unmountComponentAtNode(document.getElementById("ui-root"))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";t.r(n);var a=t(278);t.d(n,"withGame",function(){return a.withGame}),t.d(n,"withDeviceDetection",function(){return a.withDeviceDetection});var r=t(286);t.d(n,"GameProvider",function(){return r.GameProvider});var o=t(289);t.d(n,"ActionView",function(){return o.ActionView}),t.d(n,"Button",function(){return o.Button}),t.d(n,"HealthBar",function(){return o.HealthBar}),t.d(n,"IconButton",function(){return o.IconButton}),t.d(n,"Inventory",function(){return o.Inventory}),t.d(n,"SceneSwitcher",function(){return o.SceneSwitcher}),t.d(n,"ItemsBarContainer",function(){return o.ItemsBarContainer}),t.d(n,"FpsMeter",function(){return o.FpsMeter})},function(e,n,t){"use strict";t.r(n);var a=t(279);t.d(n,"withGame",function(){return a.withGame});var r=t(284);t.d(n,"withDeviceDetection",function(){return r.withDeviceDetection})},function(e,n,t){"use strict";t.r(n);var a=t(280);t.d(n,"withGame",function(){return a.withGame})},function(e,n,t){"use strict";t.r(n),t.d(n,"withGame",function(){return c});var a=t(247),r=t.n(a),o=t(281),s=t(226);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function c(e){class n extends r.a.Component{render(){return r.a.createElement(o.GameContext.Consumer,null,({messageBusObserver:n,storeObserver:t,pushMessage:a,pushAction:o,gameObjects:s})=>r.a.createElement(e,i({messageBusObserver:n,storeObserver:t,pushMessage:a,pushAction:o,gameObjects:s},this.props)))}}return n.displayName=`WithGame(${Object(s.getDisplayName)(e)})`,n}},function(e,n,t){"use strict";t.r(n);var a=t(282);t.d(n,"GameContext",function(){return a.GameContext})},function(e,n,t){"use strict";t.r(n);var a=t(283);t.d(n,"GameContext",function(){return a.GameContext})},function(e,n,t){"use strict";t.r(n),t.d(n,"GameContext",function(){return r});var a=t(247);const r=t.n(a).a.createContext()},function(e,n,t){"use strict";t.r(n);var a=t(285);t.d(n,"withDeviceDetection",function(){return a.withDeviceDetection})},function(e,n,t){"use strict";t.r(n),t.d(n,"withDeviceDetection",function(){return i});var a=t(247),r=t.n(a),o=t(226);function s(){return(s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function i(e){class n extends r.a.Component{render(){return r.a.createElement(e,s({touchDevice:Object(o.isTouchDevice)()},this.props))}}return n.displayName=`WithGame(${Object(o.getDisplayName)(e)})`,n}},function(e,n,t){"use strict";t.r(n);var a=t(287);t.d(n,"GameProvider",function(){return a.GameProvider})},function(e,n,t){"use strict";t.r(n);var a=t(288);t.d(n,"GameProvider",function(){return a.GameProvider})},function(e,n,t){"use strict";t.r(n),t.d(n,"GameProvider",function(){return c});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(281);class c extends r.a.Component{constructor(e){super(e),this.state={value:{messageBusObserver:this.props.messageBusObserver,storeObserver:this.props.storeObserver,pushMessage:this.props.pushMessage,pushAction:this.props.pushAction,gameObjects:this.props.gameObjects}}}render(){return r.a.createElement(i.GameContext.Provider,{value:this.state.value},this.props.children)}}c.propTypes={children:s.a.node,messageBusObserver:s.a.any,storeObserver:s.a.any,pushMessage:s.a.func,pushAction:s.a.func,gameObjects:s.a.any}},function(e,n,t){"use strict";t.r(n);var a=t(290);t.d(n,"ActionView",function(){return a.ActionView});var r=t(296);t.d(n,"Button",function(){return r.Button});var o=t(300);t.d(n,"HealthBar",function(){return o.HealthBar});var s=t(304);t.d(n,"IconButton",function(){return s.IconButton});var i=t(308);t.d(n,"Inventory",function(){return i.Inventory});var c=t(318);t.d(n,"SceneSwitcher",function(){return c.SceneSwitcher});var u=t(320);t.d(n,"ItemsBarContainer",function(){return u.ItemsBarContainer});var l=t(354);t.d(n,"FpsMeter",function(){return l.FpsMeter})},function(e,n,t){"use strict";t.r(n);var a=t(291);t.d(n,"ActionView",function(){return a.ActionView})},function(e,n,t){"use strict";t.r(n),t.d(n,"ActionView",function(){return c});var a=t(247),r=t.n(a),o=t(261),s=t.n(o);t(292);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}class c extends r.a.Component{constructor(...e){super(...e),i(this,"stopPropagate",e=>{this.props.stopPropagate&&e.stopPropagation()}),i(this,"onDoubleClick",e=>{this.props.onDoubleClick?this.props.onDoubleClick(e):this.stopPropagate(e)}),i(this,"onContextMenu",e=>{this.props.onContextMenu?this.props.onContextMenu(e):(e.preventDefault(),this.stopPropagate(e))}),i(this,"onMouseUp",e=>{this.props.onMouseUp?this.props.onMouseUp(e):this.stopPropagate(e)}),i(this,"onMouseDown",e=>{this.props.onMouseDown?this.props.onMouseDown(e):this.stopPropagate(e)}),i(this,"onClick",e=>{this.props.onClick?this.props.onClick(e):this.stopPropagate(e)}),i(this,"onPointerUp",e=>{this.props.onPointerUp?this.props.onPointerUp(e):this.stopPropagate(e)}),i(this,"onPointerDown",e=>{this.props.onPointerDown?this.props.onPointerDown(e):this.stopPropagate(e)})}render(){return r.a.createElement("button",{className:`action-view ${this.props.className}`,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onContextMenu:this.onContextMenu,onDoubleClick:this.onDoubleClick,onPointerUp:this.onPointerUp,onPointerDown:this.onPointerDown,onClick:this.onClick,disabled:this.props.disabled},this.props.children)}}c.defaultProps={className:"",disabled:!1,stopPropagate:!1},c.propTypes={className:s.a.string,children:s.a.any,onMouseDown:s.a.func,onMouseUp:s.a.func,onContextMenu:s.a.func,onDoubleClick:s.a.func,onClick:s.a.func,onPointerUp:s.a.func,onPointerDown:s.a.func,disabled:s.a.bool,stopPropagate:s.a.bool}},function(e,n,t){var a=t(293),r=t(294);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},,function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".action-view {\n  border: none;\n  background-color: transparent;\n  outline: none;\n  padding: 0;\n\n  cursor: pointer;\n}",""]),n.default=r},,function(e,n,t){"use strict";t.r(n);var a=t(297);t.d(n,"Button",function(){return a.Button})},function(e,n,t){"use strict";t.r(n),t.d(n,"Button",function(){return i});var a=t(247),r=t.n(a),o=t(261),s=t.n(o);t(298);class i extends r.a.Component{render(){return r.a.createElement("button",{className:`button ${this.props.className}`,onClick:this.props.onClick,disabled:this.props.disabled},this.props.title)}}i.defaultProps={className:"",title:"",onClick:()=>{},disabled:!1},i.propTypes={className:s.a.string,title:s.a.string,onClick:s.a.func,disabled:s.a.bool}},function(e,n,t){var a=t(293),r=t(299);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".button {\n  width: 100%;  \n  height: 50px;\n\n  color: #fff;\n  background-color: transparent;\n  border: 2px solid #fff;\n\n  font-size: 24px;\n  text-transform: uppercase;\n\n  padding: 0;\n}\n\n.button:hover {\n  cursor: pointer;\n}\n\n.button:focus, .button:hover {\n  outline: none;\n\n  color: #000;\n  background-color: #fff;\n}\n\n.button:disabled {\n  opacity: 0.5;\n}\n\n.button:disabled:hover {\n  cursor: initial;\n\n  color: #fff;\n  background-color: #000;\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(301);t.d(n,"HealthBar",function(){return a.HealthBar})},function(e,n,t){"use strict";t.r(n),t.d(n,"HealthBar",function(){return i});var a=t(247),r=t.n(a),o=t(261),s=t.n(o);t(302);class i extends r.a.PureComponent{render(){const{health:e,maxHealth:n,className:t}=this.props;return r.a.createElement("div",{className:`health-bar ${t}`},r.a.createElement("div",{className:"health-bar__points",style:{width:`${n?e/n*100:0}%`}}))}}i.defaultProps={className:"",health:0,maxHealth:100},i.propTypes={className:s.a.string,health:s.a.number,maxHealth:s.a.number}},function(e,n,t){var a=t(293),r=t(303);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".health-bar {\n  height: 32px;\n  width: 30%;\n  min-width: 200px;\n  max-width: 400px;\n\n  border: 4px solid white;\n}\n\n.health-bar__points {\n  background-color: #ac3232;\n\n  height: 100%;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .health-bar {\n    height: 24px;\n  }\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(305);t.d(n,"IconButton",function(){return a.IconButtonMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"IconButton",function(){return c}),t.d(n,"IconButtonMemoized",function(){return u});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(290);t(306);const c=({className:e,onClick:n,onPointerUp:t,onPointerDown:a,icon:o})=>r.a.createElement(i.ActionView,{className:`icon-button ${e}`,onClick:n,onPointerUp:t,onPointerDown:a,stopPropagate:!0},r.a.createElement("img",{src:o,className:"icon-button__icon"}));c.defaultProps={className:"",onClick:()=>{},onPointerUp:()=>{}},c.propTypes={className:s.a.string,onClick:s.a.func,onPointerUp:s.a.func,onPointerDown:s.a.func,icon:s.a.string};const u=r.a.memo(c)},function(e,n,t){var a=t(293),r=t(307);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".icon-button {\n  width: 96px;\n  height: 96px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  overflow: hidden;\n}\n\n.icon-button__icon {\n  width: 100%;\n  height: 100%;\n\n  pointer-events: none;\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(309);t.d(n,"Inventory",function(){return a.Inventory})},function(e,n,t){"use strict";t.r(n),t.d(n,"Inventory",function(){return u});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(296);t(310);const c={healPotion:{name:"healPotion",title:"Heal Potion",mod:"heal",bonuses:["HP: +50"],resource:"healGrass",cost:3},powerPotion:{name:"powerPotion",title:"Power Potion",mod:"power",bonuses:["Damage: +25","Range: +15","Duration: 5 sec"],resource:"ogreGrass",cost:3}},u=({className:e,healGrass:n,ogreGrass:t,boomGrass:o,onCraft:s,onLeave:u})=>{const[l,p]=Object(a.useState)(c[Object.keys(c)[0]].name);Object(a.useEffect)(()=>(window.addEventListener("click",m),()=>window.removeEventListener("click",m)),[]);const m=e=>{e.target.closest(".inventory")||u()};return r.a.createElement("div",{className:`inventory ${e}`},r.a.createElement("header",{className:"inventory__header"},r.a.createElement("div",{className:"inventory__heading"},r.a.createElement("h2",{className:"inventory__title"},"Inventory"),r.a.createElement("ul",{className:"inventory__resources resources"},r.a.createElement("li",{className:"resources__item resources__item_heal"},"x ",n||0),r.a.createElement("li",{className:"resources__item resources__item_ogre"},"x ",t||0),r.a.createElement("li",{className:"resources__item resources__item_boom"},"x ",o||0))),r.a.createElement(i.Button,{className:"inventory__close-button",title:"x",onClick:u})),r.a.createElement("div",{className:"inventory__content"},r.a.createElement("ul",{className:"inventory__recipes recipes"},Object.keys(c).map(e=>r.a.createElement("li",{key:c[e].name,className:`recipes__item${l===c[e].name?" recipes__item_selected":""}`,onClick:()=>p(c[e].name)},c[e].title))),(e=>{const a={healGrass:n,ogreGrass:t,boomGrass:o},u=c[e],l=a[u.resource]<u.cost;return r.a.createElement("div",{className:"inventory__craft-card craft-card"},r.a.createElement("header",{className:"craft-card__header"},r.a.createElement("h3",{className:`craft-card__title craft-card__title_${u.mod}`},u.title)),r.a.createElement("div",{className:"craft-card__description"},(e=>c[e].bonuses.map(e=>r.a.createElement("p",{className:"craft-card__bonus",key:e},e)))(e)),r.a.createElement("div",{className:`craft-card__cost ${l?"craft-card__cost_disabled":""}`},"Cost:",r.a.createElement("span",{className:`craft-card__cost-value craft-card__cost-value_${u.mod}`},"x ",u.cost)),r.a.createElement("footer",{className:"craft-card__footer"},r.a.createElement(i.Button,{className:"craft-card__button",title:"Craft",onClick:()=>s(u),disabled:l})))})(l)))};u.defaultProps={className:"",healGrass:0,ogreGrass:0,boomGrass:0},u.propTypes={className:s.a.string,healGrass:s.a.number,ogreGrass:s.a.number,boomGrass:s.a.number,onCraft:s.a.func,onLeave:s.a.func}},function(e,n,t){var a=t(293),r=t(311);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a),o=t(312),s=t.n(o),i=t(313),c=t.n(i),u=t(314),l=t.n(u),p=t(315),m=t.n(p),d=t(316),h=t.n(d),f=t(317),g=t.n(f),b=r()(!1),_=s()(c.a),x=s()(l.a),v=s()(m.a),y=s()(h.a),w=s()(g.a);b.push([e.i,".inventory {\n  display: flex;\n  flex-direction: column;\n\n  background-color: #000;\n\n  width: 100%;\n  max-width: 600px;\n  box-sizing: border-box;\n\n  padding: max(10px, env(safe-area-inset-bottom)) max(10px, env(safe-area-inset-right)) max(10px, env(safe-area-inset-bottom)) max(10px, env(safe-area-inset-left));\n}\n\n.inventory__header {\n  display: flex;\n\n  height: 60px;\n}\n\n.inventory__heading {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex: 1;\n\n  border: 2px solid #fff;\n\n  padding: 10px 15px;\n}\n\n.inventory__title {\n  margin: 0;\n\n  font-size: 32px;\n  font-weight: bold;\n  text-transform: uppercase;\n  color: #fff;\n}\n\n.resources {\n  display: flex;\n\n  list-style: none;\n  padding: 0;\n  margin: 0;\n\n  font-family: sans-serif;\n  font-size: 18px;\n  font-weight: bold;\n  color: #fff;\n}\n\n.resources__item {\n  display: flex;\n  align-items: center;\n\n  height: 32px;\n  padding-left: 37px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  background-size: 32px 32px;\n  background-repeat: no-repeat;\n}\n\n.resources__item + .resources__item {\n  margin-left: 10px;\n}\n\n.resources__item_heal {\n  background-image: url("+_+");\n}\n\n.resources__item_ogre {\n  background-image: url("+x+");\n}\n\n.resources__item_boom {\n  background-image: url("+v+");\n}\n\n.inventory__close-button {\n  width: 60px;\n  height: 60px;\n\n  margin-left: 10px;\n}\n\n.inventory__craft-card {\n  flex: 1;\n}\n\n.inventory__content {\n  display: flex;\n  flex: 1;\n\n  margin-top: 10px;\n}\n\n.recipes {\n  padding: 0;\n  margin: 0;\n\n  list-style: none;\n}\n\n.recipes__item {\n  color: #fff;\n\n  font-size: 24px;\n\n  padding: 10px 15px;\n\n  border: 2px solid white;\n\n  cursor: pointer;\n}\n\n.recipes__item_selected {\n  color: black;\n  background-color: white;\n}\n\n.recipes__item + .recipes__item {\n  border-top: none;\n}\n\n.inventory__recipes {\n  margin-right: 10px;\n}\n\n.inventory__recipes {\n  flex: 1;\n}\n\n.craft-card {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  min-height: 360px;\n\n  border: 2px solid #fff;\n}\n\n.craft-card__header {\n  display: flex;\n  justify-content: center;\n\n  padding: 10px;\n}\n\n.craft-card__title {\n  font-size: 24px;\n  color: #fff;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  background-size: 48px 48px;\n  background-repeat: no-repeat;\n  background-position: top center;\n\n  margin: 10px 0 0 0;\n  padding-top: 60px;\n}\n\n.craft-card__title_heal {\n  background-image: url("+y+");\n}\n\n.craft-card__title_power {\n  background-image: url("+w+");\n}\n\n.craft-card__description {\n  margin: 20px;\n}\n\n.craft-card__cost {\n  margin: 0 20px 20px 20px;\n\n  font-size: 18px;\n  font-weight: bold;\n  color: #fff;\n}\n\n.craft-card__cost_disabled {\n  color: #ac3232;\n}\n\n.craft-card__cost-value {\n  display: inline-block;\n  height: 24px;\n\n  padding-left: 30px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  background-size: 24px 24px;\n  background-repeat: no-repeat;\n}\n\n.craft-card__cost-value_heal {\n  background-image: url("+_+");\n}\n\n.craft-card__cost-value_power {\n  background-image: url("+x+");\n}\n\n.craft-card__bonus {\n  font-size: 18px;\n  color: #fff;\n\n  margin: 5px 0;\n}\n\n.craft-card__footer {\n  display: flex;\n  margin: auto 10px 10px 10px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .inventory {\n    width: 100%;\n    height: 100%;\n    max-width: unset;\n\n    padding: max(5px, env(safe-area-inset-bottom)) max(5px, env(safe-area-inset-right)) max(5px, env(safe-area-inset-bottom)) max(5px, env(safe-area-inset-left));\n  }\n\n  .inventory__header {\n    height: 38px;\n  }\n\n  .inventory__heading {\n    padding: 5px 10px;\n  }\n\n  .inventory__title {\n    font-size: 20px;\n  }\n\n  .resources__item {\n    height: 24px;\n    padding-left: 29px;\n    background-size: 24px 24px;\n  }\n\n  .resources {\n    font-size: 14px;\n  }\n\n  .inventory__close-button {\n    height: 38px;\n    width: 38px;\n\n    margin-left: 5px;\n  }\n\n  .inventory__content {\n    margin-top: 5px;\n  }\n\n  .inventory__recipes {\n    margin-right: 5px;\n  }\n\n  .recipes__item {\n    font-size: 16px;;\n  }\n\n  .craft-card {\n    min-height: unset;\n  }\n\n  .craft-card__header {\n    padding: 0;\n  }\n\n  .craft-card__title {\n    font-size: 16px;\n\n    background-size: 32px 32px;\n    padding-top: 40px;\n  }\n\n  .craft-card__description {\n    margin: 10px;\n  }\n\n  .craft-card__cost {\n    margin: 0 10px 10px 10px;\n\n    font-size: 14px;\n  }\n\n  .craft-card__bonus {\n    font-size: 14px;\n  }\n\n  .craft-card__button {\n    font-size: 16px;\n    height: 40px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .craft-card__title {\n    display: flex;\n    align-items: center;\n\n    height: 32px;\n\n    background-position: left;\n    padding: 0 0 0 38px;\n  }\n}\n",""]),n.default=b},,function(e,n,t){e.exports=t.p+"images/e306fbac3c74a3a5926015b3b7e07529-heal-grass.png"},function(e,n,t){e.exports=t.p+"images/58e9b14038998437c7bfe1edae845f68-ogre-grass.png"},function(e,n,t){e.exports=t.p+"images/22227c949236877bdd1ba51564ad7867-boom-grass.png"},function(e,n,t){e.exports=t.p+"images/16874ff32976527a5c3c7ab2cc205b70-heal-potion.png"},function(e,n,t){e.exports=t.p+"images/082c8fb8c1ea95d637672d60712bc193-power-potion.png"},function(e,n,t){"use strict";t.r(n);var a=t(319);t.d(n,"SceneSwitcher",function(){return a.SceneSwitcherWithRouter})},function(e,n,t){"use strict";t.r(n),t.d(n,"SceneSwitcher",function(){return c}),t.d(n,"SceneSwitcherWithRouter",function(){return u});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(258);class c extends r.a.Component{componentDidMount(){this.props.history.push(`/${this.props.sceneName}`)}render(){return r.a.createElement(r.a.Fragment,null,this.props.children)}}c.propTypes={children:s.a.node.isRequired,history:s.a.object.isRequired,sceneName:s.a.string.isRequired};const u=Object(i.withRouter)(c)},function(e,n,t){"use strict";t.r(n);var a=t(321);t.d(n,"ItemsBarContainer",function(){return a.WrappedItemsBarContainer})},function(e,n,t){"use strict";t.r(n),t.d(n,"ItemsBarContainer",function(){return l}),t.d(n,"WrappedItemsBarContainer",function(){return p});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(277),c=t(322),u=t(332);const l=({className:e,user:n,pushMessage:t,storeObserver:o,touchDevice:s})=>{const[i,l]=Object(a.useState)({}),p=Object(a.useCallback)(e=>{const{healPotion:n,powerPotion:t}=e.get("inventory");n===i.healPotion&&t===i.powerPotion||l({healPotion:n,powerPotion:t})},[]),m=Object(a.useCallback)((e,a)=>{e.stopPropagation(),t({type:"USE_ITEM",id:n.getId(),gameObject:n,item:a})},[n,t]);Object(a.useEffect)(()=>(o.subscribe(p),()=>o.unsubscribe(p)),[]);const d=s?u.ItemsBar:c.ItemsBar;return r.a.createElement(d,{className:e,onUseItem:m,items:i})};l.defaultProps={className:""},l.propTypes={className:s.a.string,user:s.a.object,storeObserver:s.a.any,pushMessage:s.a.func,touchDevice:s.a.bool};const p=Object(i.withDeviceDetection)(Object(i.withGame)(l))},function(e,n,t){"use strict";t.r(n);var a=t(323);t.d(n,"ActionBar",function(){return a.ActionBar}),t.d(n,"ItemsBar",function(){return a.ItemsBar})},function(e,n,t){"use strict";t.r(n);var a=t(324);t.d(n,"ActionBar",function(){return a.ActionBar});var r=t(328);t.d(n,"ItemsBar",function(){return r.ItemsBar})},function(e,n,t){"use strict";t.r(n);var a=t(325);t.d(n,"ActionBar",function(){return a.ActionBarMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"ActionBar",function(){return l}),t.d(n,"ActionBarMemoized",function(){return p});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(277);t(326);const c="md",u="sm",l=({className:e,onClick:n,iconSrc:t,iconDescr:a,keyName:o,title:s,size:c})=>r.a.createElement(i.ActionView,{className:`action-bar action-bar_${c} ${e}`,onClick:n,stopPropagate:!0},r.a.createElement("span",{className:"action-bar__key"},o),t&&r.a.createElement("img",{className:"action-bar__icon",src:t,alt:a}),s);l.defaultProps={className:"",onClick:()=>{},keyName:"",title:"",iconSrc:void 0,iconDescr:"",size:c},l.propTypes={className:s.a.string,onClick:s.a.func,keyName:s.a.string,title:s.a.string,iconSrc:s.a.string,iconDescr:s.a.string,size:s.a.oneOf([c,u])};const p=r.a.memo(l)},function(e,n,t){var a=t(293),r=t(327);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".action-bar {\n  display: flex;\n  align-items: center;\n\n  font-family: sans-serif;\n  font-weight: bold;\n  text-transform: uppercase;\n\n  color: #fff;\n}\n\n.action-bar_md {\n  font-size: 32px;\n}\n\n.action-bar_sm {\n  font-size: 24px;\n}\n\n.action-bar__key {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  border: 2px solid #fff;\n  border-radius: 3px;\n\n  margin-right: 10px;\n}\n\n.action-bar_md .action-bar__key {\n  width: 36px;\n  height: 36px;\n}\n\n.action-bar_sm .action-bar__key {\n  width: 30px;\n  height: 30px;\n}\n\n.action-bar__icon {\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  margin-right: 6px;\n}\n\n.action-bar_md .action-bar__icon {\n  width: 40px;\n  height: 40px;\n}\n\n.action-bar_sm .action-bar__icon {\n  width: 32px;\n  height: 32px;\n}\n\n@media screen and (max-width: 768px) {\n  .action-bar_md {\n    font-size: 16px;\n  }\n  \n  .action-bar_sm {\n    font-size: 12px;\n  }\n\n  .action-bar_md .action-bar__key,\n  .action-bar_sm .action-bar__key {\n    width: 20px;\n    height: 20px;\n  }\n\n  .action-bar_md .action-bar__icon {\n    width: 32px;\n    height: 32px;\n  }\n\n  .action-bar_sm .action-bar__icon {\n    width: 24px;\n    height: 24px;\n  }\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(329);t.d(n,"ItemsBar",function(){return a.ItemsBar})},function(e,n,t){"use strict";t.r(n),t.d(n,"ItemsBar",function(){return d});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(324),c=t(316),u=t.n(c),l=t(317),p=t.n(l);t(330);const m={healPotion:{name:"Heal Potion",key:"1",iconSrc:u.a},powerPotion:{name:"Power Potion",key:"2",iconSrc:p.a}},d=({className:e,items:n,onUseItem:t})=>{const o=Object(a.useCallback)(e=>{if(n[e])return r.a.createElement("li",{className:"items-bar-desktop__item",key:e},r.a.createElement(i.ActionBar,{className:"items-bar-desktop__action-bar",onClick:n=>t(n,e),keyName:m[e].key,title:`x ${n[e]}`,iconSrc:m[e].iconSrc,iconDescr:m[e].name,size:"sm"}))},[n,t]),s=Object(a.useCallback)(()=>Object.keys(m).reduce((e,n)=>{const t=o(n);return t?(e.push(t),e):e},[]),[o]);return r.a.createElement("ul",{className:`items-bar-desktop ${e}`},s())};d.defaultProps={className:""},d.propTypes={className:s.a.string,items:s.a.object,onUseItem:s.a.func}},function(e,n,t){var a=t(293),r=t(331);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".items-bar-desktop {\n  display: flex;\n  flex-direction: column;\n\n  padding: 0;\n  margin: 0;\n\n  list-style: none;\n}\n\n.items-bar-desktop__item + .items-bar-desktop__item {\n  margin-top: 10px;\n}\n\n.items-bar-desktop__action-bar {\n  padding: 0;\n  text-transform: none;\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(333);t.d(n,"ThumbStick",function(){return a.ThumbStick}),t.d(n,"ControlButton",function(){return a.ControlButton}),t.d(n,"MenuButton",function(){return a.MenuButton}),t.d(n,"ItemsBar",function(){return a.ItemsBar}),t.d(n,"TouchButton",function(){return a.TouchButton})},function(e,n,t){"use strict";t.r(n);var a=t(334);t.d(n,"ThumbStick",function(){return a.ThumbStick});var r=t(338);t.d(n,"ControlButton",function(){return r.ControlButton});var o=t(346);t.d(n,"MenuButton",function(){return o.MenuButton});var s=t(350);t.d(n,"ItemsBar",function(){return s.ItemsBar});var i=t(340);t.d(n,"TouchButton",function(){return i.TouchButton})},function(e,n,t){"use strict";t.r(n);var a=t(335);t.d(n,"ThumbStick",function(){return a.ConnectedThumbStick})},function(e,n,t){"use strict";t.r(n),t.d(n,"ThumbStick",function(){return p}),t.d(n,"ConnectedThumbStick",function(){return m});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(1),c=t(277);t(336);function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const l="THUMB_STICK_POSITION_CHANGE";class p extends r.a.Component{constructor(e){super(e),u(this,"updateArea",()=>{const{left:e,right:n,top:t,bottom:a,width:r}=this.areaRef.current.getBoundingClientRect();this.setState({areaRadius:r/2,areaX:(e+n)/2,areaY:(t+a)/2})}),u(this,"moveStick",e=>{const{areaRadius:n,areaX:t,areaY:a}=this.state,r=new i.Vector2(e.clientX-t,e.clientY-a),o=r.magnitude;o>n&&r.multiplyNumber(n/o),this.controlRef.current.style.transform=`translateX(${Math.floor(r.x)}px) translateY(${Math.floor(r.y)}px)`,r.multiplyNumber(1/n),this.onMove(r.x,r.y)}),u(this,"resetStick",()=>{this.setState({areaPosition:{}},this.updateArea),this.controlRef.current.style.transform="",this.onMove(0,0)}),u(this,"onPointerMove",e=>{this.moveStick(e)}),u(this,"onPointerDown",e=>{this.pointerId||(this.observerRef.current.style.width="100%",this.pointerId=e.pointerId,this.areaRef.current.setPointerCapture(e.pointerId),this.areaRef.current.addEventListener("pointermove",this.onPointerMove),this.moveStick(e))}),u(this,"onPointerUp",e=>{this.pointerId===e.pointerId&&(this.observerRef.current.style="",this.pointerId=null,this.areaRef.current.removeEventListener("pointermove",this.onPointerMove),this.resetStick())}),u(this,"onMove",(e,n)=>{this.props.pushMessage({type:l,x:e,y:n}),this.props.onMove(e,n)}),u(this,"onObserverPointerDown",e=>{const{areaX:n,areaY:t,areaRadius:a}=this.state,{clientX:r,clientY:o}=e;if(this.pointerId)return;const s=r-a,i=o-a;e.clientX=n,e.clientY=t,this.setState({areaPosition:{left:`${s}px`,top:`${i}px`}},this.updateArea)}),this.areaRef=r.a.createRef(),this.controlRef=r.a.createRef(),this.observerRef=r.a.createRef(),this.state={areaPosition:{}},this.pointerId=null}componentDidMount(){this.updateArea(),window.addEventListener("resize",this.updateArea)}componentWillUnmount(){window.removeEventListener("resize",this.updateArea)}render(){const{className:e}=this.props,{areaPosition:n}=this.state;return r.a.createElement("div",{className:`thumb-stick ${e}`,ref:this.areaRef,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,style:n},r.a.createElement("div",{ref:this.controlRef,className:"thumb-stick__control"}),r.a.createElement("div",{ref:this.observerRef,className:"thumb-stick__observer",onPointerDown:this.onObserverPointerDown}))}}p.defaultProps={className:"",onMove:()=>{}},p.propTypes={className:s.a.string,onMove:s.a.func,pushMessage:s.a.func};const m=Object(c.withGame)(p)},function(e,n,t){var a=t(293),r=t(337);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".thumb-stick {\n    position: relative;\n\n    width: 15vw;\n    height: 15vw;\n\n    max-width: 150px;\n    max-height: 150px;\n\n    min-width: 120px;\n    min-height: 120px;\n\n    box-sizing: border-box;\n    border: 4px solid #fff;\n    border-radius: 50%;\n\n    touch-action: none;\n    \n}\n\n.thumb-stick__control {\n    position: absolute;\n    top: 30%;\n    left: 30%;\n\n    width: 40%;\n    height: 40%;\n\n    background-color: #fff;\n    border-radius: 50%;\n\n    will-change: transform;\n\n    pointer-events: none;\n}\n\n.thumb-stick__observer {\n    position: fixed;\n    top: 0;\n    left: 0;\n\n    width: 50%;\n    height: 100%;\n}\n\n@media screen and (max-height: 350px) {\n    .thumb-stick {\n        width: 110px;\n        height: 110px;\n\n        min-width: unset;\n        min-height: unset;\n    }\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(339);t.d(n,"ControlButton",function(){return a.ControlButtonMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"ControlButtonMemoized",function(){return p});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(340);t(344);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function u(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const l=e=>{let{className:n,size:t}=e,a=u(e,["className","size"]);return r.a.createElement(i.TouchButton,c({},a,{className:`control-button control-button_${t} ${n}`}))};l.defaultProps={className:"",size:"md"},l.propTypes={className:s.a.string,size:s.a.oneOf(["md","lg"])};const p=r.a.memo(l)},function(e,n,t){"use strict";t.r(n);var a=t(341);t.d(n,"TouchButton",function(){return a.TouchButtonMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"TouchButtonMemoized",function(){return p});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(277);t(342);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function u(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const l=e=>{let{className:n,onClick:t}=e,o=u(e,["className","onClick"]);const[s,l]=Object(a.useState)(!1),p=Object(a.useCallback)(e=>{l(!1),t(e)},[t]),m=Object(a.useCallback)(()=>l(!0),[]);return r.a.createElement(i.IconButton,c({},o,{className:`${n} ${s?"touch-button_active":""}`,onPointerUp:p,onPointerDown:m}))};l.defaultProps={className:"",onClick:()=>{}},l.propTypes={className:s.a.string,onClick:s.a.func};const p=r.a.memo(l)},function(e,n,t){var a=t(293),r=t(343);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".touch-button_active {\n  background-color: rgba(255, 255, 255, 0.5);\n}\n",""]),n.default=r},function(e,n,t){var a=t(293),r=t(345);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".control-button {\n  border: 4px solid white;\n  border-radius: 50%;\n}\n\n.control-button_lg {\n  width: 128px;\n  height: 128px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .control-button_md {\n    width: 72px;\n    height: 72px;\n  }\n\n  .control-button_lg {\n    width: 96px;\n    height: 96px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .control-button_md {\n    width: 64px;\n    height: 64px;\n  }\n\n  .control-button_lg {\n    width: 80px;\n    height: 80px;\n  }\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(347);t.d(n,"MenuButton",function(){return a.MenuButtonMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"MenuButton",function(){return l}),t.d(n,"MenuButtonMemoized",function(){return p});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(340);t(348);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function u(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const l=e=>{let{className:n}=e,t=u(e,["className"]);return r.a.createElement(i.TouchButton,c({},t,{className:`menu-button ${n}`}))};l.defaultProps={className:""},l.propTypes={className:s.a.string};const p=r.a.memo(l)},function(e,n,t){var a=t(293),r=t(349);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".menu-button {\n    width: 96px;\n    height: 96px;\n\n    border: 4px solid white;\n    border-radius: 4px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .menu-button {\n    width: 72px;\n    height: 72px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .menu-button {\n    width: 64px;\n    height: 64px;\n  }\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(351);t.d(n,"ItemsBar",function(){return a.ItemsBar})},function(e,n,t){"use strict";t.r(n),t.d(n,"ItemsBar",function(){return d});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(340),c=t(316),u=t.n(c),l=t(317),p=t.n(l);t(352);const m={healPotion:{icon:u.a},powerPotion:{icon:p.a}},d=({className:e,items:n,onUseItem:t})=>{const o=Object(a.useCallback)(e=>{if(n[e])return r.a.createElement("li",{className:"items-bar-touch__item",key:e},r.a.createElement(i.TouchButton,{className:"items-bar-touch__icon-button",onClick:n=>t(n,e),icon:m[e].icon}),r.a.createElement("span",{className:"items-bar-touch__counter"},n[e]))},[n,t]),s=Object(a.useCallback)(()=>Object.keys(m).reduce((e,n)=>{const t=o(n);return t?(e.push(t),e):e},[]),[o]);return r.a.createElement("ul",{className:`items-bar-touch ${e}`},s())};d.defaultProps={className:""},d.propTypes={className:s.a.string,items:s.a.object,onUseItem:s.a.func}},function(e,n,t){var a=t(293),r=t(353);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".items-bar-touch {\n  display: flex;\n  flex-direction: column;\n\n  padding: 0;\n  margin: 0;\n\n  list-style: none;\n}\n\n.items-bar-touch__item {\n  position: relative;\n}\n\n.items-bar-touch__item + .items-bar-touch__item {\n  margin-top: 10px;\n}\n\n.items-bar-touch__icon-button {\n  width: 64px;\n  height: 64px;\n\n  border: 4px solid white;\n  border-radius: 50%;\n\n  padding: 8px;\n}\n\n.items-bar-touch__counter {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 24px;\n  height: 24px;\n\n  background-color: #fff;\n  border-radius: 50%;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .items-bar-touch__icon-button {\n    width: 48px;\n    height: 48px;\n\n    padding: 6px;\n  }\n\n  .items-bar-touch__counter {\n    width: 16px;\n    height: 16px;\n\n    font-size: 14px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .items-bar-touch__icon-button {\n    width: 42px;\n    height: 42px;\n  }\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(355);t.d(n,"FpsMeter",function(){return a.WrappedFpsMeter})},function(e,n,t){"use strict";t.r(n),t.d(n,"FpsMeter",function(){return l}),t.d(n,"WrappedFpsMeter",function(){return p});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(277);t(356);const c=e=>400*e/10,u=(e,n)=>120-120*e/n+4,l=({className:e,messageBusObserver:n})=>{const t=Object(a.useRef)(null),o=Object(a.useRef)(null),s=Object(a.useRef)([]),[i,l]=Object(a.useState)(0),p=Object(a.useCallback)(e=>{const n=o.current,t=s.current;t.push(e),t.length>10&&t.shift(),n.clearRect(0,0,400,120),n.fillStyle="rgba(255, 255, 255, 0.25)",n.strokeStyle="white",n.lineWidth=8,n.beginPath();const a=Math.max(...t);n.moveTo(c(t.length-1),128),n.lineTo(-8,128),n.lineTo(-8,u(t[0],a)),t.forEach((e,t)=>{n.lineTo(c(t),u(e,a))}),n.fill(),n.stroke()},[]),m=Object(a.useCallback)(e=>{const n=e.get("FPS_UPDATE");if(n){const e=Math.round(n[0].fps);l(e),p(e)}},[]);return Object(a.useEffect)(()=>(n.subscribe(m),()=>n.unsubscribe(m)),[]),Object(a.useEffect)(()=>{o.current=t.current.getContext("2d")},[]),r.a.createElement("div",{className:`fps-meter ${e}`},r.a.createElement("span",{className:"fps-meter__title"},i," FPS"),r.a.createElement("canvas",{ref:t,className:"fps-meter__chart",width:400,height:120}))};l.defaultProps={className:""},l.propTypes={className:s.a.string,messageBusObserver:s.a.any};const p=Object(i.withGame)(l)},function(e,n,t){var a=t(293),r=t(357);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".fps-meter {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  padding-top: 10px;\r\n}\r\n\r\n.fps-meter__title {\r\n  color: white;\r\n\r\n  font-size: 32px;\r\n  font-weight: 700;\r\n}\r\n\r\n.fps-meter__chart {\r\n  width: 200px;\r\n  height: 60px;\r\n\r\n  padding-top: 5px;\r\n}\r\n\r\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\r\n  .fps-meter__title {\r\n    font-size: 24px;\r\n  }\r\n\r\n  .fps-meter__chart {\r\n    width: 150px;\r\n    height: 45px;\r\n  }  \r\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(359);t.d(n,"MainMenu",function(){return a.WrappedMainMenu})},function(e,n,t){"use strict";t.r(n),t.d(n,"MainMenu",function(){return m}),t.d(n,"WrappedMainMenu",function(){return d});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(277),c=t(360),u=t(361);t(362);const l="LOAD_SCENE",p="game";class m extends r.a.Component{onPlay(){this.props.pushMessage({type:l,name:p})}render(){return r.a.createElement("div",{className:"main-menu"},r.a.createElement("header",{className:"main-menu__header"},r.a.createElement("ul",{className:"main-menu__socials"},r.a.createElement("li",{className:"socials__item"},r.a.createElement("a",{className:"socials__link socials__link_github",href:"https://github.com/michailRemmele/ludum-dare-47",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(c.default,{className:"socials__icon"}))),r.a.createElement("li",{className:"socials__item"},r.a.createElement("a",{className:"socials__link socials__link_telegram",href:"https://t.me/misha_pishet_dvizhok",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(u.default,{className:"socials__icon"}))))),r.a.createElement("main",{className:"main-menu__main"},r.a.createElement("header",{className:"main__header"},r.a.createElement("h1",{className:"main-menu__title"},"Infinite Battle")),r.a.createElement("nav",{className:"main-menu__menu menu"},r.a.createElement("ul",{className:"menu__list"},r.a.createElement("li",{className:"menu__item"},r.a.createElement(i.Button,{className:"menu__button",title:"Play",onClick:()=>this.onPlay()}))))))}}m.propTypes={pushMessage:s.a.func};const d=Object(i.withGame)(m)},function(e,n,t){"use strict";t.r(n);var a,r=t(247);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}n.default=function(e){return r.createElement("svg",o({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=r.createElement("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})))}},function(e,n,t){"use strict";t.r(n);var a,r=t(247);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}n.default=function(e){return r.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),a||(a=r.createElement("path",{d:"M23.91 3.79L20.3 20.84c-.25 1.21-.98 1.5-2 .94l-5.5-4.07-2.66 2.57c-.3.3-.55.56-1.1.56-.72 0-.6-.27-.84-.95L6.3 13.7.85 12c-1.18-.35-1.19-1.16.26-1.75l21.26-8.2c.97-.43 1.9.24 1.53 1.73z"})))}},function(e,n,t){var a=t(293),r=t(363);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".main-menu {\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  height: 100%;\n\n  background-color: #000;\n\n  font-family: sans-serif;\n\n  box-sizing: border-box;\n  padding: 0 env(safe-area-inset-right) 0 env(safe-area-inset-left);\n}\n\n.main-menu__main {\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  margin-bottom: 50px;\n}\n\n.main__header {\n  margin-bottom: 40px;\n}\n\n.main-menu__title {\n  margin: 0;\n  color: #fff;\n\n  font-size: 48px;\n}\n\n.menu__list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.menu__item + .menu__item {\n  margin-top: 15px;\n}\n\n.menu__button {\n  width: 200px;\n}\n\n.main-menu__header {\n  margin: 15px 20px;\n}\n\n.main-menu__socials {\n  display: flex;\n  justify-content: flex-end;\n\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.socials__item {\n  margin: 5px;\n}\n\n.socials__item + .socials__item {\n  margin-left: 10px;\n}\n\n.socials__link {\n  display: block;\n}\n\n.socials__icon {\n  display: block;\n\n  width: 20px;\n  height: 20px;\n  fill: #fff;\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(365);t.d(n,"Game",function(){return a.WrappedGame})},function(e,n,t){"use strict";t.r(n),t.d(n,"Game",function(){return D}),t.d(n,"WrappedGame",function(){return G});var a=t(247),r=t.n(a),o=t(261),s=t.n(o),i=t(277),c=t(332),u=t(322),l=(t(366),t(368)),p=t.n(l),m=t(369),d=t.n(m),h=t(370),f=t.n(h);function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const b="VICTORY",_="DEFEAT",x="TOGGLE_INVENTORY",v="CLOSE_INVENTORY",y="LOAD_SCENE",w="CRAFT_RECIPE",N="GRAB",E="ATTACK",k="game",O="mainMenu",P="canGrab",C="inventory",M="timeOfDay",B="1",j="health",I="development",S={GAME:"game",VICTORY:"victory",DEFEAT:"defeat",INVENTORY:"inventory"};class D extends r.a.Component{constructor(e){super(e),g(this,"onCollectItem",e=>{e.stopPropagation(),this.props.pushMessage({type:N,id:this.state.gameObjectId,gameObject:this.state.gameObject})}),g(this,"onInventoryToggle",e=>{e&&e.stopPropagation(),this.props.pushMessage({type:x})}),g(this,"onCraft",e=>{this.props.pushMessage({type:w,recipe:e})}),g(this,"onAttack",()=>{this.props.pushMessage({type:E,id:this.state.gameObjectId,gameObject:this.state.gameObject})}),this.state={pageState:S.GAME},this.renderStateStrategy={[S.GAME]:()=>this.renderHud(),[S.VICTORY]:()=>r.a.createElement(r.a.Fragment,null,this.renderHud(),r.a.createElement("div",{className:"game__overlay"},this.renderVictoryDialog())),[S.DEFEAT]:()=>r.a.createElement(r.a.Fragment,null,this.renderHud(),r.a.createElement("div",{className:"game__overlay"},this.renderDefeatDialog())),[S.INVENTORY]:()=>r.a.createElement(r.a.Fragment,null,this.renderHud(),r.a.createElement("div",{className:"game__overlay"},r.a.createElement(i.Inventory,{className:"game__inventory",healGrass:this.state.healGrass,ogreGrass:this.state.ogreGrass,boomGrass:this.state.boomGrass,onCraft:this.onCraft,onLeave:this.onInventoryToggle})))},this.messageBusSubscription=this.onMessageBusUpdate.bind(this),this.storeSubscription=this.onStoreUpdate.bind(this),this.playerSubscription=this.onPlayerUpdate.bind(this)}componentDidMount(){this.props.messageBusObserver.subscribe(this.messageBusSubscription),this.props.storeObserver.subscribe(this.storeSubscription),this.props.gameObjects.subscribe(this.playerSubscription,B)}componentWillUnmount(){this.props.messageBusObserver.unsubscribe(this.messageBusSubscription),this.props.storeObserver.unsubscribe(this.storeSubscription),this.props.gameObjects.unsubscribe(this.playerSubscription,B)}onStoreUpdate(e){const n=e.get(P);!!n.size!==this.state.canGrab&&this.setState({canGrab:!!n.size});const{healGrass:t,ogreGrass:a,boomGrass:r}=e.get(C);t===this.state.healGrass&&a===this.state.ogreGrass&&r===this.state.boomGrass||this.setState({healGrass:t,ogreGrass:a,boomGrass:r});const o=e.get(M).getDays();o!==this.state.days&&this.setState({days:o})}onMessageBusUpdate(e){e.get(b)?this.setState({pageState:S.VICTORY}):e.get(_)&&this.setState({pageState:S.DEFEAT});const n=this.state.pageState;e.get(x)&&n===S.GAME?this.setState({pageState:S.INVENTORY}):(e.get(x)||e.get(v))&&n===S.INVENTORY&&this.setState({pageState:S.GAME})}onPlayerUpdate(e){if(!e)return void this.setState({health:0,maxHealth:0});const n=e.getComponent(j),t={};n.points===this.state.health&&n.maxPoints===this.state.maxHealth||(t.health=n.points,t.maxHealth=n.maxPoints);const a=e.getId();a!==this.state.gameObjectId&&(t.gameObjectId=a,t.gameObject=e),Object.keys(t).length&&this.setState(t)}onRestart(){this.props.pushMessage({type:y,name:k})}onMainMenu(){this.props.pushMessage({type:y,name:O})}renderActionBar(){if(this.state.canGrab)return r.a.createElement(u.ActionBar,{className:"game__action-bar",onClick:this.onCollectItem,keyName:"E",title:"Collect"})}renderDialog(e){return r.a.createElement("div",{className:"game__dialog dialog"},r.a.createElement("h2",{className:"dialog__title"},e),r.a.createElement("p",{className:"dialog__description"},"You survived ",this.state.days," days"),r.a.createElement("footer",{className:"dialog__footer"},r.a.createElement(i.Button,{className:"dialog__button",title:"Restart",onClick:()=>this.onRestart()}),r.a.createElement(i.Button,{className:"dialog__button",title:"Main menu",onClick:()=>this.onMainMenu()})))}renderDefeatDialog(){return this.renderDialog("Defeat")}renderVictoryDialog(){return this.renderDialog("Victory")}renderHud(){return this.props.touchDevice?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"game__header"},r.a.createElement("div",{className:"game__left-bar"},r.a.createElement(i.HealthBar,{health:this.state.health,maxHealth:this.state.maxHealth}),"production"===I&&r.a.createElement(i.FpsMeter,{className:"game__fps-meter"})),r.a.createElement(c.MenuButton,{icon:d.a,onClick:this.onInventoryToggle})),r.a.createElement("div",{className:"game__main"},r.a.createElement(i.ItemsBarContainer,{user:this.state.gameObject})),r.a.createElement("footer",{className:"game__footer game__footer_touch"},r.a.createElement(c.ThumbStick,{className:"game__thumb-stick"}),r.a.createElement("div",{className:"game__control-bar"},this.state.canGrab&&r.a.createElement(c.ControlButton,{className:"control-bar__button control-bar__button_grab",icon:f.a,onClick:this.onCollectItem}),r.a.createElement(c.ControlButton,{className:"control-bar__button control-bar__button_attack",icon:p.a,size:"lg",onClick:this.onAttack})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"game__header"},r.a.createElement("div",{className:"game__left-bar"},r.a.createElement(i.HealthBar,{health:this.state.health}),"production"===I&&r.a.createElement(i.FpsMeter,{className:"game__fps-meter"})),r.a.createElement(u.ActionBar,{onClick:this.onInventoryToggle,keyName:"I",title:"Inventory"})),r.a.createElement("footer",{className:"game__footer"},r.a.createElement("div",{className:"game__bars"},r.a.createElement(i.ItemsBarContainer,{user:this.state.gameObject}),this.renderActionBar())))}render(){return r.a.createElement("div",{className:`game${this.props.touchDevice?" game_touch":""}`},this.renderStateStrategy[this.state.pageState]())}}D.propTypes={messageBusObserver:s.a.any,storeObserver:s.a.any,pushMessage:s.a.func,gameObjects:s.a.any,touchDevice:s.a.bool};const G=Object(i.withDeviceDetection)(Object(i.withGame)(D))},function(e,n,t){var a=t(293),r=t(367);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(295),r=t.n(a)()(!1);r.push([e.i,".game {\n  position: relative;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  width: 100%;\n  height: 100%;\n\n  font-family: sans-serif;\n\n  box-sizing: border-box;\n  padding: 30px;\n}\n\n.game_touch {\n  padding: 15px max(15px, env(safe-area-inset-right)) max(15px, env(safe-area-inset-bottom)) max(15px, env(safe-area-inset-left));\n}\n\n.game_touch * {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.game__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n\n.game__left-bar {\n  flex: 1;\n}\n\n.game__fps-meter {\n  position: absolute;\n}\n\n.game__bars {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n}\n\n.game__action-bar {\n  align-self: flex-end;\n}\n\n.game__overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.game__footer_touch {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n\n.game__thumb-stick {\n  position: absolute;\n\n  left: max(15px, env(safe-area-inset-left));\n  bottom: max(15px, env(safe-area-inset-bottom));\n}\n\n.game__control-bar {\n  position: relative;\n}\n\n.control-bar__button_grab {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  top: -25%;\n  left: -25%;\n}\n\n.game__main {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.dialog {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  width: 75%;\n  max-width: 400px;\n\n  padding: 30px;\n\n  background-color: #000;\n  color: #fff;\n}\n\n.dialog__title {\n  margin: 0 0 30px 0;\n  font-size: 48px;\n\n  text-transform: uppercase;\n}\n\n.dialog__description {\n  margin: 0 0 40px 0;\n\n  font-size: 24px;\n}\n\n.dialog__footer {\n  display: flex;\n  align-items: center;\n\n  width: 100%;\n}\n\n.dialog__button + .dialog__button {\n  margin-left: 25px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .game:not(.game_touch) {\n    padding: 20px;\n  }\n\n  .dialog {\n    padding: 20px;\n  }\n\n  .dialog__title {\n    font-size: 36px;\n    margin: 0 0 20px 0;\n  }\n\n  .dialog__description {\n    margin: 0 0 20px 0;\n  }\n\n  .dialog__footer {\n    flex-direction: column;\n  }\n\n  .dialog__button + .dialog__button {\n    margin: 15px 0 0 0;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .game_touch {\n    padding: 10px max(10px, env(safe-area-inset-right)) max(10px, env(safe-area-inset-bottom)) max(10px, env(safe-area-inset-left));\n  }\n\n  .game__thumb-stick {\n    left: max(10px, env(safe-area-inset-left));\n    bottom: max(10px, env(safe-area-inset-bottom));\n  }\n\n  .dialog {\n    height: 100%;\n  }\n}\n",""]),n.default=r},function(e,n,t){e.exports=t.p+"images/27805ddbba90aab493f08b5ce90e46e2-attack-icon.png"},function(e,n,t){e.exports=t.p+"images/f666576798144fb6e3e7c0788859b83e-inventory-icon.png"},function(e,n,t){e.exports=t.p+"images/f5e5c353438088b3025ea792b8c8e952-grab-icon.png"}])]);