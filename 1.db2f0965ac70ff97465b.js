(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[1],Array(252).concat([function(e,n,t){"use strict";t.r(n),t.d(n,"onInit",function(){return m}),t.d(n,"onDestroy",function(){return p});var a=t(253),r=t.n(a),s=t(258),i=t.n(s),o=t(264),c=t(283),l=t(363),u=t(370);function m(e){const{sceneName:n,messageBusObserver:t,storeObserver:a,pushMessage:s,pushAction:m,gameObjects:p}=e;i.a.render(r.a.createElement(c.GameProvider,{messageBusObserver:t,storeObserver:a,pushMessage:s,pushAction:m,gameObjects:p},r.a.createElement(o.MemoryRouter,null,r.a.createElement(c.SceneSwitcher,{sceneName:n},r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{path:"/mainMenu"},r.a.createElement(l.MainMenu,null)),r.a.createElement(o.Route,{path:"/game"},r.a.createElement(u.Game,null)))))),document.getElementById("ui-root"))}function p(){i.a.unmountComponentAtNode(document.getElementById("ui-root"))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";t.r(n);var a=t(284);t.d(n,"withGame",function(){return a.withGame}),t.d(n,"withDeviceDetection",function(){return a.withDeviceDetection});var r=t(292);t.d(n,"GameProvider",function(){return r.GameProvider});var s=t(295);t.d(n,"ActionView",function(){return s.ActionView}),t.d(n,"Button",function(){return s.Button}),t.d(n,"EffectsBar",function(){return s.EffectsBar}),t.d(n,"HealthBar",function(){return s.HealthBar}),t.d(n,"IconButton",function(){return s.IconButton}),t.d(n,"Inventory",function(){return s.Inventory}),t.d(n,"SceneSwitcher",function(){return s.SceneSwitcher}),t.d(n,"ItemsBarContainer",function(){return s.ItemsBarContainer}),t.d(n,"GameStatsMeter",function(){return s.GameStatsMeter})},function(e,n,t){"use strict";t.r(n);var a=t(285);t.d(n,"withGame",function(){return a.withGame});var r=t(290);t.d(n,"withDeviceDetection",function(){return r.withDeviceDetection})},function(e,n,t){"use strict";t.r(n);var a=t(286);t.d(n,"withGame",function(){return a.withGame})},function(e,n,t){"use strict";t.r(n),t.d(n,"withGame",function(){return c});var a=t(253),r=t.n(a),s=t(287),i=t(225);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function c(e){class n extends r.a.Component{render(){return r.a.createElement(s.GameContext.Consumer,null,({messageBusObserver:n,storeObserver:t,pushMessage:a,pushAction:s,gameObjects:i})=>r.a.createElement(e,o({messageBusObserver:n,storeObserver:t,pushMessage:a,pushAction:s,gameObjects:i},this.props)))}}return n.displayName=`WithGame(${Object(i.getDisplayName)(e)})`,n}},function(e,n,t){"use strict";t.r(n);var a=t(288);t.d(n,"GameContext",function(){return a.GameContext})},function(e,n,t){"use strict";t.r(n);var a=t(289);t.d(n,"GameContext",function(){return a.GameContext})},function(e,n,t){"use strict";t.r(n),t.d(n,"GameContext",function(){return r});var a=t(253);const r=t.n(a).a.createContext()},function(e,n,t){"use strict";t.r(n);var a=t(291);t.d(n,"withDeviceDetection",function(){return a.withDeviceDetection})},function(e,n,t){"use strict";t.r(n),t.d(n,"withDeviceDetection",function(){return o});var a=t(253),r=t.n(a),s=t(225);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function o(e){class n extends r.a.Component{render(){return r.a.createElement(e,i({touchDevice:Object(s.isTouchDevice)()},this.props))}}return n.displayName=`WithGame(${Object(s.getDisplayName)(e)})`,n}},function(e,n,t){"use strict";t.r(n);var a=t(293);t.d(n,"GameProvider",function(){return a.GameProvider})},function(e,n,t){"use strict";t.r(n);var a=t(294);t.d(n,"GameProvider",function(){return a.GameProvider})},function(e,n,t){"use strict";t.r(n),t.d(n,"GameProvider",function(){return c});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(287);class c extends r.a.Component{constructor(e){super(e),this.state={value:{messageBusObserver:this.props.messageBusObserver,storeObserver:this.props.storeObserver,pushMessage:this.props.pushMessage,pushAction:this.props.pushAction,gameObjects:this.props.gameObjects}}}render(){return r.a.createElement(o.GameContext.Provider,{value:this.state.value},this.props.children)}}c.propTypes={children:i.a.node,messageBusObserver:i.a.any,storeObserver:i.a.any,pushMessage:i.a.func,pushAction:i.a.func,gameObjects:i.a.any}},function(e,n,t){"use strict";t.r(n);var a=t(296);t.d(n,"ActionView",function(){return a.ActionView});var r=t(302);t.d(n,"Button",function(){return r.Button});var s=t(306);t.d(n,"EffectsBar",function(){return s.EffectsBar});var i=t(311);t.d(n,"HealthBar",function(){return i.HealthBar});var o=t(315);t.d(n,"IconButton",function(){return o.IconButton});var c=t(319);t.d(n,"Inventory",function(){return c.Inventory});var l=t(323);t.d(n,"SceneSwitcher",function(){return l.SceneSwitcher});var u=t(325);t.d(n,"ItemsBarContainer",function(){return u.ItemsBarContainer});var m=t(359);t.d(n,"GameStatsMeter",function(){return m.GameStatsMeter})},function(e,n,t){"use strict";t.r(n);var a=t(297);t.d(n,"ActionView",function(){return a.ActionView})},function(e,n,t){"use strict";t.r(n),t.d(n,"ActionView",function(){return l});var a=t(253),r=t.n(a),s=t(267),i=t.n(s);t(298);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function c(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const l=r.a.forwardRef((e,n)=>{let{className:t,stopPropagate:s,onDoubleClick:i,onContextMenu:l,onMouseUp:u,onMouseDown:m,onClick:p,onPointerUp:d,onPointerDown:f,children:h}=e,g=c(e,["className","stopPropagate","onDoubleClick","onContextMenu","onMouseUp","onMouseDown","onClick","onPointerUp","onPointerDown","children"]);const b=Object(a.useCallback)(e=>{s&&e.stopPropagation()},[s]),_=Object(a.useCallback)(e=>{i?i(e):b(e)},[i]),x=Object(a.useCallback)(e=>{l?l(e):(e.preventDefault(),b(e))},[l]),v=Object(a.useCallback)(e=>{u?u(e):b(e)},[u]),y=Object(a.useCallback)(e=>{m?m(e):b(e)},[m]),w=Object(a.useCallback)(e=>{p?p(e):b(e)},[p]),E=Object(a.useCallback)(e=>{d?d(e):b(e)},[d]),O=Object(a.useCallback)(e=>{f?f(e):b(e)},[f]);return r.a.createElement("button",o({},g,{ref:n,className:`action-view ${t}`,onMouseDown:y,onMouseUp:v,onContextMenu:x,onDoubleClick:_,onPointerUp:E,onPointerDown:O,onClick:w}),h)});l.defaultProps={className:"",stopPropagate:!1},l.propTypes={className:i.a.string,children:i.a.any,onMouseDown:i.a.func,onMouseUp:i.a.func,onContextMenu:i.a.func,onDoubleClick:i.a.func,onClick:i.a.func,onPointerUp:i.a.func,onPointerDown:i.a.func,stopPropagate:i.a.bool},l.displayName="ActionView"},function(e,n,t){var a=t(299),r=t(300);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},,function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".action-view {\n  border: none;\n  background-color: transparent;\n  outline: none;\n  padding: 0;\n\n  cursor: pointer;\n}",""]),n.default=r},,function(e,n,t){"use strict";t.r(n);var a=t(303);t.d(n,"Button",function(){return a.Button})},function(e,n,t){"use strict";t.r(n),t.d(n,"Button",function(){return o});var a=t(253),r=t.n(a),s=t(267),i=t.n(s);t(304);class o extends r.a.Component{render(){return r.a.createElement("button",{className:`button ${this.props.className}`,onClick:this.props.onClick,disabled:this.props.disabled},this.props.title)}}o.defaultProps={className:"",title:"",onClick:()=>{},disabled:!1},o.propTypes={className:i.a.string,title:i.a.string,onClick:i.a.func,disabled:i.a.bool}},function(e,n,t){var a=t(299),r=t(305);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".button {\n  width: 100%;  \n  height: 50px;\n\n  color: #fff;\n  background-color: transparent;\n  border: 2px solid #fff;\n\n  font-size: 24px;\n  text-transform: uppercase;\n\n  padding: 0;\n}\n\n.button:hover {\n  cursor: pointer;\n}\n\n.button:focus, .button:hover {\n  outline: none;\n\n  color: #000;\n  background-color: #fff;\n}\n\n.button:disabled {\n  opacity: 0.5;\n}\n\n.button:disabled:hover {\n  cursor: initial;\n\n  color: #fff;\n  background-color: #000;\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(307);t.d(n,"EffectsBar",function(){return a.EffectsBarWithGame})},function(e,n,t){"use strict";t.r(n),t.d(n,"ACTIVE_EFFECTS_COMPONENT_NAME",function(){return l}),t.d(n,"EFFECT_COMPONENT_NAME",function(){return u}),t.d(n,"UI_COMPONENT_NAME",function(){return m}),t.d(n,"EffectsBar",function(){return p}),t.d(n,"EffectsBarWithGame",function(){return d});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(283),c=t(308);t(309);const l="activeEffects",u="effect",m="ui",p=({className:e,gameObjects:n})=>{const[t,s]=Object(a.useState)([]);return Object(a.useEffect)(()=>{const e=e=>{if(!e||!e.getComponent(l))return;const n=e.getComponent(l),a=n.list.reduce((e,t)=>{const a=n.map[t],r=a.getComponent(u),s=a.getComponent(m);return r&&s&&e.push({name:t,iconSrc:s.icon,title:s.title,duration:Math.round(r.applicatorOptions.duration/1e3)}),e},[]);(a.length!==t.length||a.some((e,n)=>e.iconSrc!==t[n].iconSrc||e.title!==t[n].title||e.duration!==t[n].duration))&&s(a)};return n.subscribe(e,c.PLAYER_ID),()=>n.unsubscribe(e,c.PLAYER_ID)},[t]),t.length?r.a.createElement("ul",{className:`effects-bar ${e}`},t.map(e=>r.a.createElement("li",{className:"effects-bar__item",key:e.name},r.a.createElement("img",{className:"effects-bar__icon",src:e.iconSrc,alt:e.title}),r.a.createElement("span",{className:"effects-bar__title"},`${e.duration} sec.`)))):null};p.defaultProps={className:"",gameObjects:void 0},p.propTypes={className:i.a.string,gameObjects:i.a.any};const d=Object(o.withGame)(p)},function(e,n,t){"use strict";t.r(n),t.d(n,"PLAYER_ID",function(){return a});const a="1"},function(e,n,t){var a=t(299),r=t(310);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".effects-bar {\n  display: flex;\n\n  list-style: none;\n\n  margin: 0;\n  padding: 0;\n}\n\n.effects-bar__item {\n  display: flex;\n  flex-direction: column;\n\n  text-align: center;\n}\n\n.effects-bar__item + .effects-bar__item {\n  margin-left: 10px;\n}\n\n.effects-bar__icon {\n  width: 32px;\n  height: 32px;\n\n  padding: 5px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  border: 3px solid #fff;\n}\n\n.effects-bar__title {\n  color: #fff;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .effects-bar__icon {\n    width: 26px;\n    height: 26px;\n\n    padding: 4px;\n  }\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(312);t.d(n,"HealthBar",function(){return a.HealthBar})},function(e,n,t){"use strict";t.r(n),t.d(n,"HealthBar",function(){return o});var a=t(253),r=t.n(a),s=t(267),i=t.n(s);t(313);class o extends r.a.PureComponent{render(){const{health:e,maxHealth:n,className:t}=this.props;return r.a.createElement("div",{className:`health-bar ${t}`},r.a.createElement("div",{className:"health-bar__points",style:{width:`${n?e/n*100:0}%`}}))}}o.defaultProps={className:"",health:0,maxHealth:100},o.propTypes={className:i.a.string,health:i.a.number,maxHealth:i.a.number}},function(e,n,t){var a=t(299),r=t(314);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".health-bar {\n  height: 32px;\n  width: 30%;\n  min-width: 200px;\n  max-width: 400px;\n\n  border: 4px solid white;\n}\n\n.health-bar__points {\n  background-color: #ac3232;\n\n  height: 100%;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .health-bar {\n    height: 24px;\n  }\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(316);t.d(n,"IconButton",function(){return a.IconButtonMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"IconButton",function(){return u}),t.d(n,"IconButtonMemoized",function(){return m});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(296);t(317);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const u=r.a.forwardRef((e,n)=>{let{className:t,onClick:a,onPointerUp:s,onPointerDown:i,icon:u}=e,m=l(e,["className","onClick","onPointerUp","onPointerDown","icon"]);return r.a.createElement(o.ActionView,c({},m,{ref:n,className:`icon-button ${t}`,onClick:a,onPointerUp:s,onPointerDown:i,stopPropagate:!0}),r.a.createElement("img",{src:u,className:"icon-button__icon"}))});u.defaultProps={className:"",onClick:()=>{},onPointerUp:()=>{}},u.propTypes={className:i.a.string,onClick:i.a.func,onPointerUp:i.a.func,onPointerDown:i.a.func,icon:i.a.string},u.displayName="IconButton";const m=r.a.memo(u)},function(e,n,t){var a=t(299),r=t(318);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".icon-button {\n  width: 96px;\n  height: 96px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  overflow: hidden;\n}\n\n.icon-button__icon {\n  width: 100%;\n  height: 100%;\n\n  pointer-events: none;\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(320);t.d(n,"Inventory",function(){return a.Inventory})},function(e,n,t){"use strict";t.r(n),t.d(n,"Inventory",function(){return l});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(302);t(321);const c={healPotion:{name:"healPotion",title:"Heal Potion",mod:"heal",bonuses:["HP: +50"],resource:"healGrass",cost:3},powerPotion:{name:"powerPotion",title:"Power Potion",mod:"power",bonuses:["Damage: +25","Range: +15","Duration: 5 sec"],resource:"ogreGrass",cost:3}},l=({className:e,healGrass:n,ogreGrass:t,boomGrass:s,onCraft:i,onLeave:l})=>{const[u,m]=Object(a.useState)(c[Object.keys(c)[0]].name);Object(a.useEffect)(()=>(window.addEventListener("click",p),()=>window.removeEventListener("click",p)),[]);const p=e=>{e.target.closest(".inventory")||l()};return r.a.createElement("div",{className:`inventory ${e}`},r.a.createElement("header",{className:"inventory__header"},r.a.createElement("div",{className:"inventory__heading"},r.a.createElement("h2",{className:"inventory__title"},"Inventory"),r.a.createElement("ul",{className:"inventory__resources resources"},r.a.createElement("li",{className:"resources__item resources__item_heal"},"x ",n||0),r.a.createElement("li",{className:"resources__item resources__item_ogre"},"x ",t||0),r.a.createElement("li",{className:"resources__item resources__item_boom"},"x ",s||0))),r.a.createElement(o.Button,{className:"inventory__close-button",title:"x",onClick:l})),r.a.createElement("div",{className:"inventory__content"},r.a.createElement("ul",{className:"inventory__recipes recipes"},Object.keys(c).map(e=>r.a.createElement("li",{key:c[e].name,className:`recipes__item${u===c[e].name?" recipes__item_selected":""}`,onClick:()=>m(c[e].name)},c[e].title))),(e=>{const a={healGrass:n,ogreGrass:t,boomGrass:s},l=c[e],u=a[l.resource]<l.cost;return r.a.createElement("div",{className:"inventory__craft-card craft-card"},r.a.createElement("header",{className:"craft-card__header"},r.a.createElement("h3",{className:`craft-card__title craft-card__title_${l.mod}`},l.title)),r.a.createElement("div",{className:"craft-card__description"},(e=>c[e].bonuses.map(e=>r.a.createElement("p",{className:"craft-card__bonus",key:e},e)))(e)),r.a.createElement("div",{className:`craft-card__cost ${u?"craft-card__cost_disabled":""}`},"Cost:",r.a.createElement("span",{className:`craft-card__cost-value craft-card__cost-value_${l.mod}`},"x ",l.cost)),r.a.createElement("footer",{className:"craft-card__footer"},r.a.createElement(o.Button,{className:"craft-card__button",title:"Craft",onClick:()=>i(l),disabled:u})))})(u)))};l.defaultProps={className:"",healGrass:0,ogreGrass:0,boomGrass:0},l.propTypes={className:i.a.string,healGrass:i.a.number,ogreGrass:i.a.number,boomGrass:i.a.number,onCraft:i.a.func,onLeave:i.a.func}},function(e,n,t){var a=t(299),r=t(322);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".inventory {\n  display: flex;\n  flex-direction: column;\n\n  background-color: #000;\n\n  width: 100%;\n  max-width: 600px;\n  box-sizing: border-box;\n\n  padding: max(10px, env(safe-area-inset-bottom)) max(10px, env(safe-area-inset-right)) max(10px, env(safe-area-inset-bottom)) max(10px, env(safe-area-inset-left));\n}\n\n.inventory__header {\n  display: flex;\n\n  height: 60px;\n}\n\n.inventory__heading {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex: 1;\n\n  border: 2px solid #fff;\n\n  padding: 10px 15px;\n}\n\n.inventory__title {\n  margin: 0;\n\n  font-size: 32px;\n  font-weight: bold;\n  text-transform: uppercase;\n  color: #fff;\n}\n\n.resources {\n  display: flex;\n\n  list-style: none;\n  padding: 0;\n  margin: 0;\n\n  font-family: sans-serif;\n  font-size: 18px;\n  font-weight: bold;\n  color: #fff;\n}\n\n.resources__item {\n  display: flex;\n  align-items: center;\n\n  height: 32px;\n  padding-left: 37px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  background-size: 32px 32px;\n  background-repeat: no-repeat;\n}\n\n.resources__item + .resources__item {\n  margin-left: 10px;\n}\n\n.resources__item_heal {\n  background-image: url('./media/images/heal-grass.png');\n}\n\n.resources__item_ogre {\n  background-image: url('./media/images/ogre-grass.png');\n}\n\n.resources__item_boom {\n  background-image: url('./media/images/boom-grass.png');\n}\n\n.inventory__close-button {\n  width: 60px;\n  height: 60px;\n\n  margin-left: 10px;\n}\n\n.inventory__craft-card {\n  flex: 1;\n}\n\n.inventory__content {\n  display: flex;\n  flex: 1;\n\n  margin-top: 10px;\n}\n\n.recipes {\n  padding: 0;\n  margin: 0;\n\n  list-style: none;\n}\n\n.recipes__item {\n  color: #fff;\n\n  font-size: 24px;\n\n  padding: 10px 15px;\n\n  border: 2px solid white;\n\n  cursor: pointer;\n}\n\n.recipes__item_selected {\n  color: black;\n  background-color: white;\n}\n\n.recipes__item + .recipes__item {\n  border-top: none;\n}\n\n.inventory__recipes {\n  margin-right: 10px;\n}\n\n.inventory__recipes {\n  flex: 1;\n}\n\n.craft-card {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  min-height: 360px;\n\n  border: 2px solid #fff;\n}\n\n.craft-card__header {\n  display: flex;\n  justify-content: center;\n\n  padding: 10px;\n}\n\n.craft-card__title {\n  font-size: 24px;\n  color: #fff;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  background-size: 48px 48px;\n  background-repeat: no-repeat;\n  background-position: top center;\n\n  margin: 10px 0 0 0;\n  padding-top: 60px;\n}\n\n.craft-card__title_heal {\n  background-image: url('./media/images/heal-potion.png');\n}\n\n.craft-card__title_power {\n  background-image: url('./media/images/power-potion.png');\n}\n\n.craft-card__description {\n  margin: 20px;\n}\n\n.craft-card__cost {\n  margin: 0 20px 20px 20px;\n\n  font-size: 18px;\n  font-weight: bold;\n  color: #fff;\n}\n\n.craft-card__cost_disabled {\n  color: #ac3232;\n}\n\n.craft-card__cost-value {\n  display: inline-block;\n  height: 24px;\n\n  padding-left: 30px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  background-size: 24px 24px;\n  background-repeat: no-repeat;\n}\n\n.craft-card__cost-value_heal {\n  background-image: url('./media/images/heal-grass.png');\n}\n\n.craft-card__cost-value_power {\n  background-image: url('./media/images/ogre-grass.png');\n}\n\n.craft-card__bonus {\n  font-size: 18px;\n  color: #fff;\n\n  margin: 5px 0;\n}\n\n.craft-card__footer {\n  display: flex;\n  margin: auto 10px 10px 10px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .inventory {\n    width: 100%;\n    height: 100%;\n    max-width: unset;\n\n    padding: max(5px, env(safe-area-inset-bottom)) max(5px, env(safe-area-inset-right)) max(5px, env(safe-area-inset-bottom)) max(5px, env(safe-area-inset-left));\n  }\n\n  .inventory__header {\n    height: 38px;\n  }\n\n  .inventory__heading {\n    padding: 5px 10px;\n  }\n\n  .inventory__title {\n    font-size: 20px;\n  }\n\n  .resources__item {\n    height: 24px;\n    padding-left: 29px;\n    background-size: 24px 24px;\n  }\n\n  .resources {\n    font-size: 14px;\n  }\n\n  .inventory__close-button {\n    height: 38px;\n    width: 38px;\n\n    margin-left: 5px;\n  }\n\n  .inventory__content {\n    margin-top: 5px;\n  }\n\n  .inventory__recipes {\n    margin-right: 5px;\n  }\n\n  .recipes__item {\n    font-size: 16px;;\n  }\n\n  .craft-card {\n    min-height: unset;\n  }\n\n  .craft-card__header {\n    padding: 0;\n  }\n\n  .craft-card__title {\n    font-size: 16px;\n\n    background-size: 32px 32px;\n    padding-top: 40px;\n  }\n\n  .craft-card__description {\n    margin: 10px;\n  }\n\n  .craft-card__cost {\n    margin: 0 10px 10px 10px;\n\n    font-size: 14px;\n  }\n\n  .craft-card__bonus {\n    font-size: 14px;\n  }\n\n  .craft-card__button {\n    font-size: 16px;\n    height: 40px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .craft-card__title {\n    display: flex;\n    align-items: center;\n\n    height: 32px;\n\n    background-position: left;\n    padding: 0 0 0 38px;\n  }\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(324);t.d(n,"SceneSwitcher",function(){return a.SceneSwitcherWithRouter})},function(e,n,t){"use strict";t.r(n),t.d(n,"SceneSwitcher",function(){return c}),t.d(n,"SceneSwitcherWithRouter",function(){return l});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(264);class c extends r.a.Component{componentDidMount(){this.props.history.push(`/${this.props.sceneName}`)}render(){return r.a.createElement(r.a.Fragment,null,this.props.children)}}c.propTypes={children:i.a.node.isRequired,history:i.a.object.isRequired,sceneName:i.a.string.isRequired};const l=Object(o.withRouter)(c)},function(e,n,t){"use strict";t.r(n);var a=t(326);t.d(n,"ItemsBarContainer",function(){return a.WrappedItemsBarContainer})},function(e,n,t){"use strict";t.r(n),t.d(n,"ItemsBarContainer",function(){return u}),t.d(n,"WrappedItemsBarContainer",function(){return m});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(283),c=t(327),l=t(337);const u=({className:e,user:n,pushMessage:t,storeObserver:s,touchDevice:i})=>{const[o,u]=Object(a.useState)({}),m=Object(a.useCallback)(e=>{const{healPotion:n,powerPotion:t}=e.get("inventory");n===o.healPotion&&t===o.powerPotion||u({healPotion:n,powerPotion:t})},[]),p=Object(a.useCallback)((e,a)=>{e.stopPropagation(),t({type:"USE_ITEM",id:n.getId(),gameObject:n,item:a})},[n,t]);Object(a.useEffect)(()=>(s.subscribe(m),()=>s.unsubscribe(m)),[]);const d=i?l.ItemsBar:c.ItemsBar;return r.a.createElement(d,{className:e,onUseItem:p,items:o})};u.defaultProps={className:""},u.propTypes={className:i.a.string,user:i.a.object,storeObserver:i.a.any,pushMessage:i.a.func,touchDevice:i.a.bool};const m=Object(o.withDeviceDetection)(Object(o.withGame)(u))},function(e,n,t){"use strict";t.r(n);var a=t(328);t.d(n,"ActionBar",function(){return a.ActionBar}),t.d(n,"ItemsBar",function(){return a.ItemsBar})},function(e,n,t){"use strict";t.r(n);var a=t(329);t.d(n,"ActionBar",function(){return a.ActionBar});var r=t(333);t.d(n,"ItemsBar",function(){return r.ItemsBar})},function(e,n,t){"use strict";t.r(n);var a=t(330);t.d(n,"ActionBar",function(){return a.ActionBarMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"ActionBar",function(){return u}),t.d(n,"ActionBarMemoized",function(){return m});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(283);t(331);const c="md",l="sm",u=({className:e,onClick:n,iconSrc:t,iconDescr:a,keyName:s,title:i,size:c})=>r.a.createElement(o.ActionView,{className:`action-bar action-bar_${c} ${e}`,onClick:n,stopPropagate:!0},r.a.createElement("span",{className:"action-bar__key"},s),t&&r.a.createElement("img",{className:"action-bar__icon",src:t,alt:a}),i);u.defaultProps={className:"",onClick:()=>{},keyName:"",title:"",iconSrc:void 0,iconDescr:"",size:c},u.propTypes={className:i.a.string,onClick:i.a.func,keyName:i.a.string,title:i.a.string,iconSrc:i.a.string,iconDescr:i.a.string,size:i.a.oneOf([c,l])};const m=r.a.memo(u)},function(e,n,t){var a=t(299),r=t(332);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".action-bar {\n  display: flex;\n  align-items: center;\n\n  font-family: sans-serif;\n  font-weight: bold;\n  text-transform: uppercase;\n\n  color: #fff;\n}\n\n.action-bar_md {\n  font-size: 32px;\n}\n\n.action-bar_sm {\n  font-size: 24px;\n}\n\n.action-bar__key {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  border: 2px solid #fff;\n  border-radius: 3px;\n\n  margin-right: 10px;\n}\n\n.action-bar_md .action-bar__key {\n  width: 36px;\n  height: 36px;\n}\n\n.action-bar_sm .action-bar__key {\n  width: 30px;\n  height: 30px;\n}\n\n.action-bar__icon {\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  margin-right: 6px;\n}\n\n.action-bar_md .action-bar__icon {\n  width: 40px;\n  height: 40px;\n}\n\n.action-bar_sm .action-bar__icon {\n  width: 32px;\n  height: 32px;\n}\n\n@media screen and (max-width: 768px) {\n  .action-bar_md {\n    font-size: 16px;\n  }\n  \n  .action-bar_sm {\n    font-size: 12px;\n  }\n\n  .action-bar_md .action-bar__key,\n  .action-bar_sm .action-bar__key {\n    width: 20px;\n    height: 20px;\n  }\n\n  .action-bar_md .action-bar__icon {\n    width: 32px;\n    height: 32px;\n  }\n\n  .action-bar_sm .action-bar__icon {\n    width: 24px;\n    height: 24px;\n  }\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(334);t.d(n,"ItemsBar",function(){return a.ItemsBar})},function(e,n,t){"use strict";t.r(n),t.d(n,"ItemsBar",function(){return l});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(329);t(335);const c={healPotion:{name:"Heal Potion",key:"1",iconSrc:"./media/images/heal-potion.png"},powerPotion:{name:"Power Potion",key:"2",iconSrc:"./media/images/power-potion.png"}},l=({className:e,items:n,onUseItem:t})=>{const s=Object(a.useCallback)(e=>{if(n[e])return r.a.createElement("li",{className:"items-bar-desktop__item",key:e},r.a.createElement(o.ActionBar,{className:"items-bar-desktop__action-bar",onClick:n=>t(n,e),keyName:c[e].key,title:`x ${n[e]}`,iconSrc:c[e].iconSrc,iconDescr:c[e].name,size:"sm"}))},[n,t]),i=Object(a.useCallback)(()=>Object.keys(c).reduce((e,n)=>{const t=s(n);return t?(e.push(t),e):e},[]),[s]);return r.a.createElement("ul",{className:`items-bar-desktop ${e}`},i())};l.defaultProps={className:""},l.propTypes={className:i.a.string,items:i.a.object,onUseItem:i.a.func}},function(e,n,t){var a=t(299),r=t(336);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".items-bar-desktop {\n  display: flex;\n  flex-direction: column;\n\n  padding: 0;\n  margin: 0;\n\n  list-style: none;\n}\n\n.items-bar-desktop__item + .items-bar-desktop__item {\n  margin-top: 10px;\n}\n\n.items-bar-desktop__action-bar {\n  padding: 0;\n  text-transform: none;\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(338);t.d(n,"ThumbStick",function(){return a.ThumbStick}),t.d(n,"ControlButton",function(){return a.ControlButton}),t.d(n,"MenuButton",function(){return a.MenuButton}),t.d(n,"ItemsBar",function(){return a.ItemsBar}),t.d(n,"TouchButton",function(){return a.TouchButton})},function(e,n,t){"use strict";t.r(n);var a=t(339);t.d(n,"ThumbStick",function(){return a.ThumbStick});var r=t(343);t.d(n,"ControlButton",function(){return r.ControlButton});var s=t(351);t.d(n,"MenuButton",function(){return s.MenuButton});var i=t(355);t.d(n,"ItemsBar",function(){return i.ItemsBar});var o=t(345);t.d(n,"TouchButton",function(){return o.TouchButton})},function(e,n,t){"use strict";t.r(n);var a=t(340);t.d(n,"ThumbStick",function(){return a.ConnectedThumbStick})},function(e,n,t){"use strict";t.r(n),t.d(n,"ThumbStick",function(){return m}),t.d(n,"ConnectedThumbStick",function(){return p});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(1),c=t(283);t(341);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const u="THUMB_STICK_POSITION_CHANGE";class m extends r.a.Component{constructor(e){super(e),l(this,"updateArea",()=>{const{left:e,right:n,top:t,bottom:a,width:r}=this.areaRef.current.getBoundingClientRect(),{left:s,top:i}=this.observerRef.current.getBoundingClientRect();this.setState({areaRadius:r/2,areaX:(e+n)/2,areaY:(t+a)/2,observerX:s,observerY:i})}),l(this,"moveStick",e=>{const{areaRadius:n,areaX:t,areaY:a}=this.state,r=new o.Vector2(e.clientX-t,e.clientY-a),s=r.magnitude;s>n&&r.multiplyNumber(n/s),this.controlRef.current.style.transform=`translateX(${Math.floor(r.x)}px) translateY(${Math.floor(r.y)}px)`,r.multiplyNumber(1/n),this.onMove(r.x,r.y)}),l(this,"resetStick",()=>{this.areaRef.current.style="",this.controlRef.current.style="",this.updateArea(),this.onMove(0,0)}),l(this,"onPointerMove",e=>{this.pointerId===e.pointerId&&this.moveStick(e)}),l(this,"onPointerDown",e=>{const{areaX:n,areaY:t,areaRadius:a,observerX:r,observerY:s}=this.state,{clientX:i,clientY:o}=e;if(this.pointerId)return;this.pointerId=e.pointerId;const c=i-r-a,l=o-s-a;e.clientX=n,e.clientY=t,this.areaRef.current.style.left=`${c}px`,this.areaRef.current.style.top=`${l}px`,this.updateArea(),this.observerRef.current.setPointerCapture(e.pointerId),this.observerRef.current.addEventListener("pointermove",this.onPointerMove),this.moveStick(e)}),l(this,"onPointerUp",e=>{this.pointerId===e.pointerId&&(this.pointerId=null,this.areaRef.current.removeEventListener("pointermove",this.onPointerMove),this.resetStick())}),l(this,"onMove",(e,n)=>{this.props.pushMessage({type:u,x:e,y:n}),this.props.onMove(e,n)}),this.areaRef=r.a.createRef(),this.controlRef=r.a.createRef(),this.observerRef=r.a.createRef(),this.state={},this.pointerId=null}componentDidMount(){this.updateArea(),window.addEventListener("resize",this.updateArea)}componentWillUnmount(){window.removeEventListener("resize",this.updateArea),this.areaRef.current.removeEventListener("pointermove",this.onPointerMove),this.onMove(0,0)}render(){const{className:e}=this.props;return r.a.createElement("div",{ref:this.observerRef,className:`thumb-stick-observer ${e}`,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onPointerLeave:this.onPointerUp,onPointerCancel:this.onPointerUp},r.a.createElement("div",{ref:this.areaRef,className:"thumb-stick"},r.a.createElement("div",{ref:this.controlRef,className:"thumb-stick__control"})))}}m.defaultProps={className:"",onMove:()=>{}},m.propTypes={className:i.a.string,onMove:i.a.func,pushMessage:i.a.func};const p=Object(c.withGame)(m)},function(e,n,t){var a=t(299),r=t(342);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".thumb-stick-observer {\n    touch-action: none;\n}\n\n.thumb-stick {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n\n    width: 15vw;\n    height: 15vw;\n\n    max-width: 150px;\n    max-height: 150px;\n\n    min-width: 120px;\n    min-height: 120px;\n\n    box-sizing: border-box;\n    border: 4px solid #fff;\n    border-radius: 50%;\n\n    pointer-events: none;\n}\n\n.thumb-stick__control {\n    position: absolute;\n    top: 30%;\n    left: 30%;\n\n    width: 40%;\n    height: 40%;\n\n    background-color: #fff;\n    border-radius: 50%;\n\n    will-change: transform;\n\n    pointer-events: none;\n}\n\n@media screen and (max-height: 350px) {\n    .thumb-stick {\n        width: 110px;\n        height: 110px;\n\n        min-width: unset;\n        min-height: unset;\n    }\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(344);t.d(n,"ControlButton",function(){return a.ControlButtonMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"ControlButtonMemoized",function(){return m});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(345);t(349);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const u=e=>{let{className:n,size:t}=e,a=l(e,["className","size"]);return r.a.createElement(o.TouchButton,c({},a,{className:`control-button control-button_${t} ${n}`}))};u.defaultProps={className:"",size:"md"},u.propTypes={className:i.a.string,size:i.a.oneOf(["md","lg"])};const m=r.a.memo(u)},function(e,n,t){"use strict";t.r(n);var a=t(346);t.d(n,"TouchButton",function(){return a.TouchButtonMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"TouchButtonMemoized",function(){return m});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(283);t(347);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const u=e=>{let{className:n,onClick:t}=e,s=l(e,["className","onClick"]);const i=Object(a.useRef)(null),[u,m]=Object(a.useState)(!1);Object(a.useEffect)(()=>{if(!i.current)return;const e=e=>e.preventDefault();return i.current.addEventListener("touchstart",e,{passive:!1}),()=>i.current.removeEventListener("touchstart",e)},[i]);const p=Object(a.useCallback)(e=>{m(!1),t(e)},[t]),d=Object(a.useCallback)(()=>m(!0),[]);return r.a.createElement(o.IconButton,c({},s,{ref:i,className:`${n} ${u?"touch-button_active":""}`,onPointerUp:p,onPointerDown:d}))};u.defaultProps={className:"",onClick:()=>{}},u.propTypes={className:i.a.string,onClick:i.a.func};const m=r.a.memo(u)},function(e,n,t){var a=t(299),r=t(348);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".touch-button_active {\n  background-color: rgba(255, 255, 255, 0.5);\n}\n",""]),n.default=r},function(e,n,t){var a=t(299),r=t(350);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".control-button {\n  border: 4px solid white;\n  border-radius: 50%;\n}\n\n.control-button_lg {\n  width: 128px;\n  height: 128px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .control-button_md {\n    width: 72px;\n    height: 72px;\n  }\n\n  .control-button_lg {\n    width: 96px;\n    height: 96px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .control-button_md {\n    width: 64px;\n    height: 64px;\n  }\n\n  .control-button_lg {\n    width: 80px;\n    height: 80px;\n  }\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(352);t.d(n,"MenuButton",function(){return a.MenuButtonMemoized})},function(e,n,t){"use strict";t.r(n),t.d(n,"MenuButton",function(){return u}),t.d(n,"MenuButtonMemoized",function(){return m});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(345);t(353);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const u=e=>{let{className:n}=e,t=l(e,["className"]);return r.a.createElement(o.TouchButton,c({},t,{className:`menu-button ${n}`}))};u.defaultProps={className:""},u.propTypes={className:i.a.string};const m=r.a.memo(u)},function(e,n,t){var a=t(299),r=t(354);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".menu-button {\n    width: 96px;\n    height: 96px;\n\n    border: 4px solid white;\n    border-radius: 4px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .menu-button {\n    width: 72px;\n    height: 72px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .menu-button {\n    width: 64px;\n    height: 64px;\n  }\n}\n",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(356);t.d(n,"ItemsBar",function(){return a.ItemsBar})},function(e,n,t){"use strict";t.r(n),t.d(n,"ItemsBar",function(){return l});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(345);t(357);const c={healPotion:{icon:"./media/images/heal-potion.png"},powerPotion:{icon:"./media/images/power-potion.png"}},l=({className:e,items:n,onUseItem:t})=>{const s=Object(a.useCallback)(e=>{if(n[e])return r.a.createElement("li",{className:"items-bar-touch__item",key:e},r.a.createElement(o.TouchButton,{className:"items-bar-touch__icon-button",onClick:n=>t(n,e),icon:c[e].icon}),r.a.createElement("span",{className:"items-bar-touch__counter"},n[e]))},[n,t]),i=Object(a.useCallback)(()=>Object.keys(c).reduce((e,n)=>{const t=s(n);return t?(e.push(t),e):e},[]),[s]);return r.a.createElement("ul",{className:`items-bar-touch ${e}`},i())};l.defaultProps={className:""},l.propTypes={className:i.a.string,items:i.a.object,onUseItem:i.a.func}},function(e,n,t){var a=t(299),r=t(358);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".items-bar-touch {\n  display: flex;\n  flex-direction: column;\n\n  padding: 0;\n  margin: 0;\n\n  list-style: none;\n}\n\n.items-bar-touch__item {\n  position: relative;\n}\n\n.items-bar-touch__item + .items-bar-touch__item {\n  margin-top: 10px;\n}\n\n.items-bar-touch__icon-button {\n  width: 64px;\n  height: 64px;\n\n  border: 4px solid white;\n  border-radius: 50%;\n\n  padding: 8px;\n}\n\n.items-bar-touch__counter {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 24px;\n  height: 24px;\n\n  background-color: #fff;\n  border-radius: 50%;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .items-bar-touch__icon-button {\n    width: 48px;\n    height: 48px;\n\n    padding: 6px;\n  }\n\n  .items-bar-touch__counter {\n    width: 16px;\n    height: 16px;\n\n    font-size: 14px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .items-bar-touch__icon-button {\n    width: 42px;\n    height: 42px;\n  }\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(360);t.d(n,"GameStatsMeter",function(){return a.WrappedGameStatsMeter})},function(e,n,t){"use strict";t.r(n),t.d(n,"GameStatsMeter",function(){return u}),t.d(n,"WrappedGameStatsMeter",function(){return m});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(283);t(361);const c=e=>400*e/10,l=(e,n)=>120-120*e/n+4,u=({className:e,messageBusObserver:n})=>{const t=Object(a.useRef)(null),s=Object(a.useRef)(null),i=Object(a.useRef)([]),[o,u]=Object(a.useState)(0),[m,p]=Object(a.useState)(0),[d,f]=Object(a.useState)(0),h=Object(a.useCallback)(e=>{const n=s.current,t=i.current;t.push(e),t.length>10&&t.shift(),n.clearRect(0,0,400,120),n.fillStyle="rgba(255, 255, 255, 0.25)",n.strokeStyle="white",n.lineWidth=8,n.beginPath();const a=Math.max(...t);n.moveTo(c(t.length-1),128),n.lineTo(-8,128),n.lineTo(-8,l(t[0],a)),t.forEach((e,t)=>{n.lineTo(c(t),l(e,a))}),n.fill(),n.stroke()},[]),g=Object(a.useCallback)(e=>{const n=e.get("GAME_STATS_UPDATE");if(n){const e=Math.round(n[0].fps);p(n[0].gameObjectsCount),f(n[0].messagesCount),u(n[0].messagesCount),h(e)}},[]);return Object(a.useEffect)(()=>(n.subscribe(g),()=>n.unsubscribe(g)),[]),Object(a.useEffect)(()=>{s.current=t.current.getContext("2d")},[]),r.a.createElement("div",{className:`game-stats-meter ${e}`},r.a.createElement("div",{className:"game-stats-meter__details"},r.a.createElement("span",{className:"game-stats-meter__fps"},`${o} FPS`),r.a.createElement("div",{className:"game-stats-meter__load"},r.a.createElement("span",{className:"game-stats-meter__additional"},`Game objects: ${m}`),r.a.createElement("span",{className:"game-stats-meter__additional"},`Messages: ${d}`))),r.a.createElement("canvas",{ref:t,className:"game-stats-meter__chart",width:400,height:120}))};u.defaultProps={className:""},u.propTypes={className:i.a.string,messageBusObserver:i.a.any};const m=Object(o.withGame)(u)},function(e,n,t){var a=t(299),r=t(362);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".game-stats-meter {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  padding-top: 10px;\r\n}\r\n\r\n.game-stats-meter__details {\r\n  display: flex;\r\n}\r\n\r\n.game-stats-meter__fps {\r\n  color: white;\r\n\r\n  font-size: 32px;\r\n  font-weight: 700;\r\n}\r\n\r\n.game-stats-meter__load {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  margin: 2px 0 0 10px;\r\n}\r\n\r\n.game-stats-meter__additional {\r\n  font-size: 14px;\r\n  color: white;\r\n}\r\n\r\n.game-stats-meter__chart {\r\n  width: 200px;\r\n  height: 60px;\r\n\r\n  padding-top: 5px;\r\n}\r\n\r\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\r\n  .game-stats-meter__title {\r\n    font-size: 24px;\r\n  }\r\n\r\n  .game-stats-meter__chart {\r\n    width: 150px;\r\n    height: 45px;\r\n  }  \r\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(364);t.d(n,"MainMenu",function(){return a.WrappedMainMenu})},function(e,n,t){"use strict";t.r(n),t.d(n,"MainMenu",function(){return m}),t.d(n,"WrappedMainMenu",function(){return p});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(283),c=t(365);t(368);const l="LOAD_SCENE",u="game";class m extends r.a.Component{onPlay(){this.props.pushMessage({type:l,name:u})}render(){return r.a.createElement("div",{className:"main-menu"},r.a.createElement("header",{className:"main-menu__header"},r.a.createElement("ul",{className:"main-menu__socials"},r.a.createElement("li",{className:"socials__item"},r.a.createElement("a",{className:"socials__link socials__link_github",href:"https://github.com/michailRemmele/ludum-dare-47",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(c.GithubIcon,{className:"socials__icon"}))),r.a.createElement("li",{className:"socials__item"},r.a.createElement("a",{className:"socials__link socials__link_telegram",href:"https://t.me/misha_pishet_dvizhok",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(c.TelegramIcon,{className:"socials__icon"}))))),r.a.createElement("main",{className:"main-menu__main"},r.a.createElement("header",{className:"main__header"},r.a.createElement("h1",{className:"main-menu__title"},"Infinite Battle")),r.a.createElement("nav",{className:"main-menu__menu menu"},r.a.createElement("ul",{className:"menu__list"},r.a.createElement("li",{className:"menu__item"},r.a.createElement(o.Button,{className:"menu__button",title:"Play",onClick:()=>this.onPlay()}))))))}}m.propTypes={pushMessage:i.a.func};const p=Object(o.withGame)(m)},function(e,n,t){"use strict";t.r(n);var a=t(366);t.d(n,"GithubIcon",function(){return a.default});var r=t(367);t.d(n,"TelegramIcon",function(){return r.default})},function(e,n,t){"use strict";t.r(n);var a,r=t(253);function s(){return(s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}n.default=function(e){return r.createElement("svg",s({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=r.createElement("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})))}},function(e,n,t){"use strict";t.r(n);var a,r=t(253);function s(){return(s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}n.default=function(e){return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),a||(a=r.createElement("path",{d:"M23.91 3.79L20.3 20.84c-.25 1.21-.98 1.5-2 .94l-5.5-4.07-2.66 2.57c-.3.3-.55.56-1.1.56-.72 0-.6-.27-.84-.95L6.3 13.7.85 12c-1.18-.35-1.19-1.16.26-1.75l21.26-8.2c.97-.43 1.9.24 1.53 1.73z"})))}},function(e,n,t){var a=t(299),r=t(369);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".main-menu {\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  height: 100%;\n\n  background-color: #000;\n\n  font-family: sans-serif;\n\n  box-sizing: border-box;\n  padding: 0 env(safe-area-inset-right) 0 env(safe-area-inset-left);\n}\n\n.main-menu__main {\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  margin-bottom: 50px;\n}\n\n.main__header {\n  margin-bottom: 40px;\n}\n\n.main-menu__title {\n  margin: 0;\n  color: #fff;\n\n  font-size: 48px;\n}\n\n.menu__list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.menu__item + .menu__item {\n  margin-top: 15px;\n}\n\n.menu__button {\n  width: 200px;\n}\n\n.main-menu__header {\n  margin: 15px 20px;\n}\n\n.main-menu__socials {\n  display: flex;\n  justify-content: flex-end;\n\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.socials__item {\n  margin: 5px;\n}\n\n.socials__item + .socials__item {\n  margin-left: 10px;\n}\n\n.socials__link {\n  display: block;\n}\n\n.socials__icon {\n  display: block;\n\n  width: 20px;\n  height: 20px;\n  fill: #fff;\n}",""]),n.default=r},function(e,n,t){"use strict";t.r(n);var a=t(371);t.d(n,"Game",function(){return a.WrappedGame})},function(e,n,t){"use strict";t.r(n),t.d(n,"Game",function(){return j}),t.d(n,"WrappedGame",function(){return B});var a=t(253),r=t.n(a),s=t(267),i=t.n(s),o=t(283),c=t(337),l=t(327),u=t(308);t(372);function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const p="VICTORY",d="DEFEAT",f="TOGGLE_INVENTORY",h="CLOSE_INVENTORY",g="LOAD_SCENE",b="CRAFT_RECIPE",_="GRAB",x="ATTACK",v="game",y="mainMenu",w="canGrab",E="inventory",O="timeOfDay",N="health",k="development",C={GAME:"game",VICTORY:"victory",DEFEAT:"defeat",INVENTORY:"inventory"};class j extends r.a.Component{constructor(e){super(e),m(this,"onCollectItem",e=>{e.stopPropagation(),this.props.pushMessage({type:_,id:this.state.gameObjectId,gameObject:this.state.gameObject})}),m(this,"onInventoryToggle",e=>{e&&e.stopPropagation(),this.props.pushMessage({type:f})}),m(this,"onCraft",e=>{this.props.pushMessage({type:b,recipe:e})}),m(this,"onAttack",()=>{this.props.pushMessage({type:x,id:this.state.gameObjectId,gameObject:this.state.gameObject})}),this.state={pageState:C.GAME},this.renderStateStrategy={[C.GAME]:()=>this.renderHud(),[C.VICTORY]:()=>r.a.createElement(r.a.Fragment,null,this.renderHud(),r.a.createElement("div",{className:"game__overlay"},this.renderVictoryDialog())),[C.DEFEAT]:()=>r.a.createElement(r.a.Fragment,null,this.renderHud(),r.a.createElement("div",{className:"game__overlay"},this.renderDefeatDialog())),[C.INVENTORY]:()=>r.a.createElement(r.a.Fragment,null,this.renderHud(),r.a.createElement("div",{className:"game__overlay"},r.a.createElement(o.Inventory,{className:"game__inventory",healGrass:this.state.healGrass,ogreGrass:this.state.ogreGrass,boomGrass:this.state.boomGrass,onCraft:this.onCraft,onLeave:this.onInventoryToggle})))},this.messageBusSubscription=this.onMessageBusUpdate.bind(this),this.storeSubscription=this.onStoreUpdate.bind(this),this.playerSubscription=this.onPlayerUpdate.bind(this)}componentDidMount(){this.props.messageBusObserver.subscribe(this.messageBusSubscription),this.props.storeObserver.subscribe(this.storeSubscription),this.props.gameObjects.subscribe(this.playerSubscription,u.PLAYER_ID)}componentWillUnmount(){this.props.messageBusObserver.unsubscribe(this.messageBusSubscription),this.props.storeObserver.unsubscribe(this.storeSubscription),this.props.gameObjects.unsubscribe(this.playerSubscription,u.PLAYER_ID)}onStoreUpdate(e){const n=e.get(w);!!n.size!==this.state.canGrab&&this.setState({canGrab:!!n.size});const{healGrass:t,ogreGrass:a,boomGrass:r}=e.get(E);t===this.state.healGrass&&a===this.state.ogreGrass&&r===this.state.boomGrass||this.setState({healGrass:t,ogreGrass:a,boomGrass:r});const s=e.get(O).getDays();s!==this.state.days&&this.setState({days:s})}onMessageBusUpdate(e){e.get(p)?this.setState({pageState:C.VICTORY}):e.get(d)&&this.setState({pageState:C.DEFEAT});const n=this.state.pageState;e.get(f)&&n===C.GAME?this.setState({pageState:C.INVENTORY}):(e.get(f)||e.get(h))&&n===C.INVENTORY&&this.setState({pageState:C.GAME})}onPlayerUpdate(e){if(!e)return void this.setState({health:0,maxHealth:0});const n=e.getComponent(N),t={};n.points===this.state.health&&n.maxPoints===this.state.maxHealth||(t.health=n.points,t.maxHealth=n.maxPoints);const a=e.getId();a!==this.state.gameObjectId&&(t.gameObjectId=a,t.gameObject=e),Object.keys(t).length&&this.setState(t)}onRestart(){this.props.pushMessage({type:g,name:v})}onMainMenu(){this.props.pushMessage({type:g,name:y})}renderActionBar(){if(this.state.canGrab)return r.a.createElement(l.ActionBar,{className:"game__action-bar",onClick:this.onCollectItem,keyName:"E",title:"Collect"})}renderDialog(e){return r.a.createElement("div",{className:"game__dialog dialog"},r.a.createElement("h2",{className:"dialog__title"},e),r.a.createElement("p",{className:"dialog__description"},"You survived ",this.state.days," days"),r.a.createElement("footer",{className:"dialog__footer"},r.a.createElement(o.Button,{className:"dialog__button",title:"Restart",onClick:()=>this.onRestart()}),r.a.createElement(o.Button,{className:"dialog__button",title:"Main menu",onClick:()=>this.onMainMenu()})))}renderDefeatDialog(){return this.renderDialog("Defeat")}renderVictoryDialog(){return this.renderDialog("Victory")}renderHud(){return this.props.touchDevice?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"game__header"},r.a.createElement("div",{className:"game__left-bar"},r.a.createElement(o.HealthBar,{health:this.state.health,maxHealth:this.state.maxHealth}),r.a.createElement(o.EffectsBar,{className:"game__effects-bar"}),"production"===k&&r.a.createElement(o.GameStatsMeter,{className:"game__game-stats-meter"})),r.a.createElement(c.MenuButton,{icon:"./media/images/inventory-icon.png",onClick:this.onInventoryToggle})),r.a.createElement("div",{className:"game__main"},r.a.createElement(o.ItemsBarContainer,{user:this.state.gameObject})),r.a.createElement("footer",{className:"game__footer game__footer_touch"},r.a.createElement(c.ThumbStick,{className:"game__thumb-stick"}),r.a.createElement("div",{className:"game__control-bar"},this.state.canGrab&&r.a.createElement(c.ControlButton,{className:"control-bar__button control-bar__button_grab",icon:"./media/images/grab-icon.png",onClick:this.onCollectItem}),r.a.createElement(c.ControlButton,{className:"control-bar__button control-bar__button_attack",icon:"./media/images/attack-icon.png",size:"lg",onClick:this.onAttack})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"game__header"},r.a.createElement("div",{className:"game__left-bar"},r.a.createElement(o.HealthBar,{health:this.state.health}),r.a.createElement(o.EffectsBar,{className:"game__effects-bar"}),"production"===k&&r.a.createElement(o.GameStatsMeter,{className:"game__game-stats-meter"})),r.a.createElement(l.ActionBar,{onClick:this.onInventoryToggle,keyName:"I",title:"Inventory"})),r.a.createElement("footer",{className:"game__footer"},r.a.createElement("div",{className:"game__bars"},r.a.createElement(o.ItemsBarContainer,{user:this.state.gameObject}),this.renderActionBar())))}render(){return r.a.createElement("div",{className:`game${this.props.touchDevice?" game_touch":""}`},this.renderStateStrategy[this.state.pageState]())}}j.propTypes={messageBusObserver:i.a.any,storeObserver:i.a.any,pushMessage:i.a.func,gameObjects:i.a.any,touchDevice:i.a.bool};const B=Object(o.withDeviceDetection)(Object(o.withGame)(j))},function(e,n,t){var a=t(299),r=t(373);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};a(r,s);e.exports=r.locals||{}},function(e,n,t){"use strict";t.r(n);var a=t(301),r=t.n(a)()(!1);r.push([e.i,".game {\n  position: relative;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  width: 100%;\n  height: 100%;\n\n  font-family: sans-serif;\n\n  box-sizing: border-box;\n  padding: 30px;\n}\n\n.game_touch {\n  padding: 15px max(15px, env(safe-area-inset-right)) max(15px, env(safe-area-inset-bottom)) max(15px, env(safe-area-inset-left));\n}\n\n.game_touch * {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.game__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n\n.game__left-bar {\n  flex: 1;\n}\n\n.game__effects-bar {\n  margin-top: 10px;\n}\n\n.game__game-stats-meter {\n  position: absolute;\n}\n\n.game__bars {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n}\n\n.game__action-bar {\n  align-self: flex-end;\n}\n\n.game__overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.game__footer_touch {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n\n.game__thumb-stick {\n  position: absolute;\n\n  left: max(15px, env(safe-area-inset-left));\n  bottom: max(15px, env(safe-area-inset-bottom));\n\n  width: calc(50% - max(15px, env(safe-area-inset-left)));\n  height: calc(70% - max(15px, env(safe-area-inset-bottom)));\n}\n\n.game__control-bar {\n  position: relative;\n}\n\n.control-bar__button_grab {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  top: -25%;\n  left: -25%;\n}\n\n.game__main {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.dialog {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  width: 75%;\n  max-width: 400px;\n\n  padding: 30px;\n\n  background-color: #000;\n  color: #fff;\n}\n\n.dialog__title {\n  margin: 0 0 30px 0;\n  font-size: 48px;\n\n  text-transform: uppercase;\n}\n\n.dialog__description {\n  margin: 0 0 40px 0;\n\n  font-size: 24px;\n}\n\n.dialog__footer {\n  display: flex;\n  align-items: center;\n\n  width: 100%;\n}\n\n.dialog__button + .dialog__button {\n  margin-left: 25px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .game:not(.game_touch) {\n    padding: 20px;\n  }\n\n  .dialog {\n    padding: 20px;\n  }\n\n  .dialog__title {\n    font-size: 36px;\n    margin: 0 0 20px 0;\n  }\n\n  .dialog__description {\n    margin: 0 0 20px 0;\n  }\n\n  .dialog__footer {\n    flex-direction: column;\n  }\n\n  .dialog__button + .dialog__button {\n    margin: 15px 0 0 0;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .game_touch {\n    padding: 10px max(10px, env(safe-area-inset-right)) max(10px, env(safe-area-inset-bottom)) max(10px, env(safe-area-inset-left));\n  }\n\n  .game__thumb-stick {\n    left: max(10px, env(safe-area-inset-left));\n    bottom: max(10px, env(safe-area-inset-bottom));\n  }\n\n  .dialog {\n    height: 100%;\n  }\n}\n",""]),n.default=r}])]);