(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[1],Array(242).concat([function(n,e,t){"use strict";t.r(e),t.d(e,"onInit",function(){return p}),t.d(e,"onDestroy",function(){return m});var a=t(243),r=t.n(a),i=t(248),o=t.n(i),s=t(254),c=t(272),u=t(345),l=t(351);function p(n){const{sceneName:e,messageBusObserver:t,storeObserver:a,pushMessage:i,pushAction:p,gameObjects:m}=n;o.a.render(r.a.createElement(c.GameProvider,{messageBusObserver:t,storeObserver:a,pushMessage:i,pushAction:p,gameObjects:m},r.a.createElement(s.MemoryRouter,null,r.a.createElement(c.SceneSwitcher,{sceneName:e},r.a.createElement(s.Switch,null,r.a.createElement(s.Route,{path:"/mainMenu"},r.a.createElement(u.MainMenu,null)),r.a.createElement(s.Route,{path:"/game"},r.a.createElement(l.Game,null)))))),document.getElementById("ui-root"))}function m(){o.a.unmountComponentAtNode(document.getElementById("ui-root"))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e,t){"use strict";t.r(e);var a=t(273);t.d(e,"withGame",function(){return a.withGame}),t.d(e,"withDeviceDetection",function(){return a.withDeviceDetection});var r=t(281);t.d(e,"GameProvider",function(){return r.GameProvider});var i=t(284);t.d(e,"ActionView",function(){return i.ActionView}),t.d(e,"Button",function(){return i.Button}),t.d(e,"HealthBar",function(){return i.HealthBar}),t.d(e,"IconButton",function(){return i.IconButton}),t.d(e,"Inventory",function(){return i.Inventory}),t.d(e,"SceneSwitcher",function(){return i.SceneSwitcher}),t.d(e,"ItemsBarContainer",function(){return i.ItemsBarContainer})},function(n,e,t){"use strict";t.r(e);var a=t(274);t.d(e,"withGame",function(){return a.withGame});var r=t(279);t.d(e,"withDeviceDetection",function(){return r.withDeviceDetection})},function(n,e,t){"use strict";t.r(e);var a=t(275);t.d(e,"withGame",function(){return a.withGame})},function(n,e,t){"use strict";t.r(e),t.d(e,"withGame",function(){return c});var a=t(243),r=t.n(a),i=t(276),o=t(224);function s(){return(s=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n}).apply(this,arguments)}function c(n){class e extends r.a.Component{render(){return r.a.createElement(i.GameContext.Consumer,null,({messageBusObserver:e,storeObserver:t,pushMessage:a,pushAction:i,gameObjects:o})=>r.a.createElement(n,s({messageBusObserver:e,storeObserver:t,pushMessage:a,pushAction:i,gameObjects:o},this.props)))}}return e.displayName=`WithGame(${Object(o.getDisplayName)(n)})`,e}},function(n,e,t){"use strict";t.r(e);var a=t(277);t.d(e,"GameContext",function(){return a.GameContext})},function(n,e,t){"use strict";t.r(e);var a=t(278);t.d(e,"GameContext",function(){return a.GameContext})},function(n,e,t){"use strict";t.r(e),t.d(e,"GameContext",function(){return r});var a=t(243);const r=t.n(a).a.createContext()},function(n,e,t){"use strict";t.r(e);var a=t(280);t.d(e,"withDeviceDetection",function(){return a.withDeviceDetection})},function(n,e,t){"use strict";t.r(e),t.d(e,"withDeviceDetection",function(){return s});var a=t(243),r=t.n(a),i=t(224);function o(){return(o=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n}).apply(this,arguments)}function s(n){class e extends r.a.Component{render(){return r.a.createElement(n,o({touchDevice:Object(i.isTouchDevice)()},this.props))}}return e.displayName=`WithGame(${Object(i.getDisplayName)(n)})`,e}},function(n,e,t){"use strict";t.r(e);var a=t(282);t.d(e,"GameProvider",function(){return a.GameProvider})},function(n,e,t){"use strict";t.r(e);var a=t(283);t.d(e,"GameProvider",function(){return a.GameProvider})},function(n,e,t){"use strict";t.r(e),t.d(e,"GameProvider",function(){return c});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(276);class c extends r.a.Component{constructor(n){super(n),this.state={value:{messageBusObserver:this.props.messageBusObserver,storeObserver:this.props.storeObserver,pushMessage:this.props.pushMessage,pushAction:this.props.pushAction,gameObjects:this.props.gameObjects}}}render(){return r.a.createElement(s.GameContext.Provider,{value:this.state.value},this.props.children)}}c.propTypes={children:o.a.node,messageBusObserver:o.a.any,storeObserver:o.a.any,pushMessage:o.a.func,pushAction:o.a.func,gameObjects:o.a.any}},function(n,e,t){"use strict";t.r(e);var a=t(285);t.d(e,"ActionView",function(){return a.ActionView});var r=t(291);t.d(e,"Button",function(){return r.Button});var i=t(295);t.d(e,"HealthBar",function(){return i.HealthBar});var o=t(299);t.d(e,"IconButton",function(){return o.IconButton});var s=t(303);t.d(e,"Inventory",function(){return s.Inventory});var c=t(313);t.d(e,"SceneSwitcher",function(){return c.SceneSwitcher});var u=t(315);t.d(e,"ItemsBarContainer",function(){return u.ItemsBarContainer})},function(n,e,t){"use strict";t.r(e);var a=t(286);t.d(e,"ActionView",function(){return a.ActionView})},function(n,e,t){"use strict";t.r(e),t.d(e,"ActionView",function(){return c});var a=t(243),r=t.n(a),i=t(256),o=t.n(i);t(287);function s(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class c extends r.a.Component{constructor(...n){super(...n),s(this,"stopPropagate",n=>{this.props.stopPropagate&&n.stopPropagation()}),s(this,"onDoubleClick",n=>{this.props.onDoubleClick?this.props.onDoubleClick(n):this.stopPropagate(n)}),s(this,"onContextMenu",n=>{this.props.onContextMenu?this.props.onContextMenu(n):(n.preventDefault(),this.stopPropagate(n))}),s(this,"onMouseUp",n=>{this.props.onMouseUp?this.props.onMouseUp(n):this.stopPropagate(n)}),s(this,"onMouseDown",n=>{this.props.onMouseDown?this.props.onMouseDown(n):this.stopPropagate(n)}),s(this,"onClick",n=>{this.props.onClick?this.props.onClick(n):this.stopPropagate(n)}),s(this,"onPointerUp",n=>{this.props.onPointerUp?this.props.onPointerUp(n):this.stopPropagate(n)})}render(){return r.a.createElement("button",{className:`action-view ${this.props.className}`,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onContextMenu:this.onContextMenu,onDoubleClick:this.onDoubleClick,onPointerUp:this.onPointerUp,onClick:this.onClick,disabled:this.props.disabled},this.props.children)}}c.defaultProps={className:"",disabled:!1,stopPropagate:!1},c.propTypes={className:o.a.string,children:o.a.any,onMouseDown:o.a.func,onMouseUp:o.a.func,onContextMenu:o.a.func,onDoubleClick:o.a.func,onClick:o.a.func,onPointerUp:o.a.func,disabled:o.a.bool,stopPropagate:o.a.bool}},function(n,e,t){var a=t(288),r=t(289);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},,function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".action-view {\n  border: none;\n  background-color: transparent;\n  outline: none;\n  padding: 0;\n\n  cursor: pointer;\n}",""]),e.default=r},,function(n,e,t){"use strict";t.r(e);var a=t(292);t.d(e,"Button",function(){return a.Button})},function(n,e,t){"use strict";t.r(e),t.d(e,"Button",function(){return s});var a=t(243),r=t.n(a),i=t(256),o=t.n(i);t(293);class s extends r.a.Component{render(){return r.a.createElement("button",{className:`button ${this.props.className}`,onClick:this.props.onClick,disabled:this.props.disabled},this.props.title)}}s.defaultProps={className:"",title:"",onClick:()=>{},disabled:!1},s.propTypes={className:o.a.string,title:o.a.string,onClick:o.a.func,disabled:o.a.bool}},function(n,e,t){var a=t(288),r=t(294);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".button {\n  width: 100%;  \n  height: 50px;\n\n  color: #fff;\n  background-color: transparent;\n  border: 2px solid #fff;\n\n  font-size: 24px;\n  text-transform: uppercase;\n\n  padding: 0;\n}\n\n.button:hover {\n  cursor: pointer;\n}\n\n.button:focus, .button:hover {\n  outline: none;\n\n  color: #000;\n  background-color: #fff;\n}\n\n.button:disabled {\n  opacity: 0.5;\n}\n\n.button:disabled:hover {\n  cursor: initial;\n\n  color: #fff;\n  background-color: #000;\n}",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(296);t.d(e,"HealthBar",function(){return a.HealthBar})},function(n,e,t){"use strict";t.r(e),t.d(e,"HealthBar",function(){return s});var a=t(243),r=t.n(a),i=t(256),o=t.n(i);t(297);class s extends r.a.PureComponent{render(){const{health:n,maxHealth:e,className:t}=this.props;return r.a.createElement("div",{className:`health-bar ${t}`},r.a.createElement("div",{className:"health-bar__points",style:{width:`${e?n/e*100:0}%`}}))}}s.defaultProps={className:"",health:0,maxHealth:100},s.propTypes={className:o.a.string,health:o.a.number,maxHealth:o.a.number}},function(n,e,t){var a=t(288),r=t(298);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".health-bar {\n  height: 32px;\n  width: 30%;\n  min-width: 200px;\n  max-width: 400px;\n\n  border: 4px solid white;\n}\n\n.health-bar__points {\n  background-color: #ac3232;\n\n  height: 100%;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .health-bar {\n    height: 24px;\n  }\n}",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(300);t.d(e,"IconButton",function(){return a.IconButtonMemoized})},function(n,e,t){"use strict";t.r(e),t.d(e,"IconButton",function(){return c}),t.d(e,"IconButtonMemoized",function(){return u});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(285);t(301);const c=({className:n,onClick:e,onPointerUp:t,icon:a})=>r.a.createElement(s.ActionView,{className:`icon-button ${n}`,onClick:e,onPointerUp:t,stopPropagate:!0},r.a.createElement("img",{src:a,className:"icon-button__icon"}));c.defaultProps={className:"",onClick:()=>{},onPointerUp:()=>{}},c.propTypes={className:o.a.string,onClick:o.a.func,onPointerUp:o.a.func,icon:o.a.string};const u=r.a.memo(c)},function(n,e,t){var a=t(288),r=t(302);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".icon-button {\n  width: 96px;\n  height: 96px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  overflow: hidden;\n}\n\n.icon-button__icon {\n  width: 100%;\n  height: 100%;\n\n  pointer-events: none;\n}\n",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(304);t.d(e,"Inventory",function(){return a.Inventory})},function(n,e,t){"use strict";t.r(e),t.d(e,"Inventory",function(){return u});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(291);t(305);const c={healPotion:{name:"healPotion",title:"Heal Potion",mod:"heal",bonuses:["HP: +50"],resource:"healGrass",cost:3},powerPotion:{name:"powerPotion",title:"Power Potion",mod:"power",bonuses:["Damage: +25","Range: +15","Duration: 5 sec"],resource:"ogreGrass",cost:3}},u=({className:n,healGrass:e,ogreGrass:t,boomGrass:i,onCraft:o,onLeave:u})=>{const[l,p]=Object(a.useState)(c[Object.keys(c)[0]].name);Object(a.useEffect)(()=>(window.addEventListener("click",m),()=>window.removeEventListener("click",m)),[]);const m=n=>{n.target.closest(".inventory")||u()};return r.a.createElement("div",{className:`inventory ${n}`},r.a.createElement("header",{className:"inventory__header"},r.a.createElement("div",{className:"inventory__heading"},r.a.createElement("h2",{className:"inventory__title"},"Inventory"),r.a.createElement("ul",{className:"inventory__resources resources"},r.a.createElement("li",{className:"resources__item resources__item_heal"},"x ",e||0),r.a.createElement("li",{className:"resources__item resources__item_ogre"},"x ",t||0),r.a.createElement("li",{className:"resources__item resources__item_boom"},"x ",i||0))),r.a.createElement(s.Button,{className:"inventory__close-button",title:"x",onClick:u})),r.a.createElement("div",{className:"inventory__content"},r.a.createElement("ul",{className:"inventory__recipes recipes"},Object.keys(c).map(n=>r.a.createElement("li",{key:c[n].name,className:`recipes__item${l===c[n].name?" recipes__item_selected":""}`,onClick:()=>p(c[n].name)},c[n].title))),(n=>{const a={healGrass:e,ogreGrass:t,boomGrass:i},u=c[n],l=a[u.resource]<u.cost;return r.a.createElement("div",{className:"inventory__craft-card craft-card"},r.a.createElement("header",{className:"craft-card__header"},r.a.createElement("h3",{className:`craft-card__title craft-card__title_${u.mod}`},u.title)),r.a.createElement("div",{className:"craft-card__description"},(n=>c[n].bonuses.map(n=>r.a.createElement("p",{className:"craft-card__bonus",key:n},n)))(n)),r.a.createElement("div",{className:`craft-card__cost ${l?"craft-card__cost_disabled":""}`},"Cost:",r.a.createElement("span",{className:`craft-card__cost-value craft-card__cost-value_${u.mod}`},"x ",u.cost)),r.a.createElement("footer",{className:"craft-card__footer"},r.a.createElement(s.Button,{className:"craft-card__button",title:"Craft",onClick:()=>o(u),disabled:l})))})(l)))};u.defaultProps={className:"",healGrass:0,ogreGrass:0,boomGrass:0},u.propTypes={className:o.a.string,healGrass:o.a.number,ogreGrass:o.a.number,boomGrass:o.a.number,onCraft:o.a.func,onLeave:o.a.func}},function(n,e,t){var a=t(288),r=t(306);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a),i=t(307),o=t.n(i),s=t(308),c=t.n(s),u=t(309),l=t.n(u),p=t(310),m=t.n(p),d=t(311),h=t.n(d),f=t(312),g=t.n(f),_=r()(!1),b=o()(c.a),x=o()(l.a),v=o()(m.a),y=o()(h.a),w=o()(g.a);_.push([n.i,".inventory {\n  display: flex;\n  flex-direction: column;\n\n  background-color: #000;\n\n  width: 100%;\n  max-width: 600px;\n  box-sizing: border-box;\n\n  padding: 10px max(10px, env(safe-area-inset-right)) max(10px, env(safe-area-inset-bottom)) max(10px, env(safe-area-inset-left));\n}\n\n.inventory__header {\n  display: flex;\n\n  height: 60px;\n}\n\n.inventory__heading {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex: 1;\n\n  border: 2px solid #fff;\n\n  padding: 10px 15px;\n}\n\n.inventory__title {\n  margin: 0;\n\n  font-size: 32px;\n  font-weight: bold;\n  text-transform: uppercase;\n  color: #fff;\n}\n\n.resources {\n  display: flex;\n\n  list-style: none;\n  padding: 0;\n  margin: 0;\n\n  font-family: sans-serif;\n  font-size: 18px;\n  font-weight: bold;\n  color: #fff;\n}\n\n.resources__item {\n  display: flex;\n  align-items: center;\n\n  height: 32px;\n  padding-left: 37px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  background-size: 32px 32px;\n  background-repeat: no-repeat;\n}\n\n.resources__item + .resources__item {\n  margin-left: 10px;\n}\n\n.resources__item_heal {\n  background-image: url("+b+");\n}\n\n.resources__item_ogre {\n  background-image: url("+x+");\n}\n\n.resources__item_boom {\n  background-image: url("+v+");\n}\n\n.inventory__close-button {\n  width: 60px;\n  height: 60px;\n\n  margin-left: 10px;\n}\n\n.inventory__craft-card {\n  flex: 1;\n}\n\n.inventory__content {\n  display: flex;\n  flex: 1;\n\n  margin-top: 10px;\n}\n\n.recipes {\n  padding: 0;\n  margin: 0;\n\n  list-style: none;\n}\n\n.recipes__item {\n  color: #fff;\n\n  font-size: 24px;\n\n  padding: 10px 15px;\n\n  border: 2px solid white;\n\n  cursor: pointer;\n}\n\n.recipes__item_selected {\n  color: black;\n  background-color: white;\n}\n\n.recipes__item + .recipes__item {\n  border-top: none;\n}\n\n.inventory__recipes {\n  margin-right: 10px;\n}\n\n.inventory__recipes {\n  flex: 1;\n}\n\n.craft-card {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  min-height: 360px;\n\n  border: 2px solid #fff;\n}\n\n.craft-card__header {\n  display: flex;\n  justify-content: center;\n\n  padding: 10px;\n}\n\n.craft-card__title {\n  font-size: 24px;\n  color: #fff;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  background-size: 48px 48px;\n  background-repeat: no-repeat;\n  background-position: top center;\n\n  margin: 10px 0 0 0;\n  padding-top: 60px;\n}\n\n.craft-card__title_heal {\n  background-image: url("+y+");\n}\n\n.craft-card__title_power {\n  background-image: url("+w+");\n}\n\n.craft-card__description {\n  margin: 20px;\n}\n\n.craft-card__cost {\n  margin: 0 20px 20px 20px;\n\n  font-size: 18px;\n  font-weight: bold;\n  color: #fff;\n}\n\n.craft-card__cost_disabled {\n  color: #ac3232;\n}\n\n.craft-card__cost-value {\n  display: inline-block;\n  height: 24px;\n\n  padding-left: 30px;\n\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  background-size: 24px 24px;\n  background-repeat: no-repeat;\n}\n\n.craft-card__cost-value_heal {\n  background-image: url("+b+");\n}\n\n.craft-card__cost-value_power {\n  background-image: url("+x+");\n}\n\n.craft-card__bonus {\n  font-size: 18px;\n  color: #fff;\n\n  margin: 5px 0;\n}\n\n.craft-card__footer {\n  display: flex;\n  margin: auto 10px 10px 10px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .inventory {\n    width: 100%;\n    height: 100%;\n    max-width: unset;\n\n    padding: 5px max(5px, env(safe-area-inset-right)) max(5px, env(safe-area-inset-bottom)) max(5px, env(safe-area-inset-left));\n  }\n\n  .inventory__header {\n    height: 38px;\n  }\n\n  .inventory__heading {\n    padding: 5px 10px;\n  }\n\n  .inventory__title {\n    font-size: 20px;\n  }\n\n  .resources__item {\n    height: 24px;\n    padding-left: 29px;\n    background-size: 24px 24px;\n  }\n\n  .resources {\n    font-size: 14px;\n  }\n\n  .inventory__close-button {\n    height: 38px;\n    width: 38px;\n\n    margin-left: 5px;\n  }\n\n  .inventory__content {\n    margin-top: 5px;\n  }\n\n  .inventory__recipes {\n    margin-right: 5px;\n  }\n\n  .recipes__item {\n    font-size: 16px;;\n  }\n\n  .craft-card {\n    min-height: unset;\n  }\n\n  .craft-card__header {\n    padding: 0;\n  }\n\n  .craft-card__title {\n    font-size: 16px;\n\n    background-size: 32px 32px;\n    padding-top: 40px;\n  }\n\n  .craft-card__description {\n    margin: 10px;\n  }\n\n  .craft-card__cost {\n    margin: 0 10px 10px 10px;\n\n    font-size: 14px;\n  }\n\n  .craft-card__bonus {\n    font-size: 14px;\n  }\n\n  .craft-card__button {\n    font-size: 16px;\n    height: 30px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .craft-card__title {\n    display: flex;\n    align-items: center;\n\n    height: 32px;\n\n    background-position: left;\n    padding: 0 0 0 38px;\n  }\n}\n",""]),e.default=_},,function(n,e,t){n.exports=t.p+"images/e306fbac3c74a3a5926015b3b7e07529-heal-grass.png"},function(n,e,t){n.exports=t.p+"images/58e9b14038998437c7bfe1edae845f68-ogre-grass.png"},function(n,e,t){n.exports=t.p+"images/22227c949236877bdd1ba51564ad7867-boom-grass.png"},function(n,e,t){n.exports=t.p+"images/16874ff32976527a5c3c7ab2cc205b70-heal-potion.png"},function(n,e,t){n.exports=t.p+"images/082c8fb8c1ea95d637672d60712bc193-power-potion.png"},function(n,e,t){"use strict";t.r(e);var a=t(314);t.d(e,"SceneSwitcher",function(){return a.SceneSwitcherWithRouter})},function(n,e,t){"use strict";t.r(e),t.d(e,"SceneSwitcher",function(){return c}),t.d(e,"SceneSwitcherWithRouter",function(){return u});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(254);class c extends r.a.Component{componentDidMount(){this.props.history.push(`/${this.props.sceneName}`)}render(){return r.a.createElement(r.a.Fragment,null,this.props.children)}}c.propTypes={children:o.a.node.isRequired,history:o.a.object.isRequired,sceneName:o.a.string.isRequired};const u=Object(s.withRouter)(c)},function(n,e,t){"use strict";t.r(e);var a=t(316);t.d(e,"ItemsBarContainer",function(){return a.WrappedItemsBarContainer})},function(n,e,t){"use strict";t.r(e),t.d(e,"ItemsBarContainer",function(){return l}),t.d(e,"WrappedItemsBarContainer",function(){return p});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(272),c=t(317),u=t(327);const l=({className:n,user:e,pushMessage:t,storeObserver:i,touchDevice:o})=>{const[s,l]=Object(a.useState)({}),p=Object(a.useCallback)(n=>{const{healPotion:e,powerPotion:t}=n.get("inventory");e===s.healPotion&&t===s.powerPotion||l({healPotion:e,powerPotion:t})},[]),m=Object(a.useCallback)((n,a)=>{n.stopPropagation(),t({type:"USE_ITEM",id:e.getId(),gameObject:e,item:a})},[e,t]);Object(a.useEffect)(()=>(i.subscribe(p),()=>i.unsubscribe(p)),[]);const d=o?u.ItemsBar:c.ItemsBar;return r.a.createElement(d,{className:n,onUseItem:m,items:s})};l.defaultProps={className:""},l.propTypes={className:o.a.string,user:o.a.object,storeObserver:o.a.any,pushMessage:o.a.func,touchDevice:o.a.bool};const p=Object(s.withDeviceDetection)(Object(s.withGame)(l))},function(n,e,t){"use strict";t.r(e);var a=t(318);t.d(e,"ActionBar",function(){return a.ActionBar}),t.d(e,"ItemsBar",function(){return a.ItemsBar})},function(n,e,t){"use strict";t.r(e);var a=t(319);t.d(e,"ActionBar",function(){return a.ActionBar});var r=t(323);t.d(e,"ItemsBar",function(){return r.ItemsBar})},function(n,e,t){"use strict";t.r(e);var a=t(320);t.d(e,"ActionBar",function(){return a.ActionBarMemoized})},function(n,e,t){"use strict";t.r(e),t.d(e,"ActionBar",function(){return l}),t.d(e,"ActionBarMemoized",function(){return p});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(272);t(321);const c="md",u="sm",l=({className:n,onClick:e,iconSrc:t,iconDescr:a,keyName:i,title:o,size:c})=>r.a.createElement(s.ActionView,{className:`action-bar action-bar_${c} ${n}`,onClick:e,stopPropagate:!0},r.a.createElement("span",{className:"action-bar__key"},i),t&&r.a.createElement("img",{className:"action-bar__icon",src:t,alt:a}),o);l.defaultProps={className:"",onClick:()=>{},keyName:"",title:"",iconSrc:void 0,iconDescr:"",size:c},l.propTypes={className:o.a.string,onClick:o.a.func,keyName:o.a.string,title:o.a.string,iconSrc:o.a.string,iconDescr:o.a.string,size:o.a.oneOf([c,u])};const p=r.a.memo(l)},function(n,e,t){var a=t(288),r=t(322);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".action-bar {\n  display: flex;\n  align-items: center;\n\n  font-family: sans-serif;\n  font-weight: bold;\n  text-transform: uppercase;\n\n  color: #fff;\n}\n\n.action-bar_md {\n  font-size: 32px;\n}\n\n.action-bar_sm {\n  font-size: 24px;\n}\n\n.action-bar__key {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  border: 2px solid #fff;\n  border-radius: 3px;\n\n  margin-right: 10px;\n}\n\n.action-bar_md .action-bar__key {\n  width: 36px;\n  height: 36px;\n}\n\n.action-bar_sm .action-bar__key {\n  width: 30px;\n  height: 30px;\n}\n\n.action-bar__icon {\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n\n  margin-right: 6px;\n}\n\n.action-bar_md .action-bar__icon {\n  width: 40px;\n  height: 40px;\n}\n\n.action-bar_sm .action-bar__icon {\n  width: 32px;\n  height: 32px;\n}\n\n@media screen and (max-width: 768px) {\n  .action-bar_md {\n    font-size: 16px;\n  }\n  \n  .action-bar_sm {\n    font-size: 12px;\n  }\n\n  .action-bar_md .action-bar__key,\n  .action-bar_sm .action-bar__key {\n    width: 20px;\n    height: 20px;\n  }\n\n  .action-bar_md .action-bar__icon {\n    width: 32px;\n    height: 32px;\n  }\n\n  .action-bar_sm .action-bar__icon {\n    width: 24px;\n    height: 24px;\n  }\n}\n",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(324);t.d(e,"ItemsBar",function(){return a.ItemsBar})},function(n,e,t){"use strict";t.r(e),t.d(e,"ItemsBar",function(){return d});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(319),c=t(311),u=t.n(c),l=t(312),p=t.n(l);t(325);const m={healPotion:{name:"Heal Potion",key:"1",iconSrc:u.a},powerPotion:{name:"Power Potion",key:"2",iconSrc:p.a}},d=({className:n,items:e,onUseItem:t})=>{const i=Object(a.useCallback)(n=>{if(e[n])return r.a.createElement("li",{className:"items-bar-desktop__item",key:n},r.a.createElement(s.ActionBar,{className:"items-bar-desktop__action-bar",onClick:e=>t(e,n),keyName:m[n].key,title:`x ${e[n]}`,iconSrc:m[n].iconSrc,iconDescr:m[n].name,size:"sm"}))},[e,t]),o=Object(a.useCallback)(()=>Object.keys(m).reduce((n,e)=>{const t=i(e);return t?(n.push(t),n):n},[]),[i]);return r.a.createElement("ul",{className:`items-bar-desktop ${n}`},o())};d.defaultProps={className:""},d.propTypes={className:o.a.string,items:o.a.object,onUseItem:o.a.func}},function(n,e,t){var a=t(288),r=t(326);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".items-bar-desktop {\n  display: flex;\n  flex-direction: column;\n\n  padding: 0;\n  margin: 0;\n\n  list-style: none;\n}\n\n.items-bar-desktop__item + .items-bar-desktop__item {\n  margin-top: 10px;\n}\n\n.items-bar-desktop__action-bar {\n  padding: 0;\n  text-transform: none;\n}\n",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(328);t.d(e,"ThumbStick",function(){return a.ThumbStick}),t.d(e,"ControlButton",function(){return a.ControlButton}),t.d(e,"MenuButton",function(){return a.MenuButton}),t.d(e,"ItemsBar",function(){return a.ItemsBar})},function(n,e,t){"use strict";t.r(e);var a=t(329);t.d(e,"ThumbStick",function(){return a.ThumbStick});var r=t(333);t.d(e,"ControlButton",function(){return r.ControlButton});var i=t(337);t.d(e,"MenuButton",function(){return i.MenuButton});var o=t(341);t.d(e,"ItemsBar",function(){return o.ItemsBar})},function(n,e,t){"use strict";t.r(e);var a=t(330);t.d(e,"ThumbStick",function(){return a.ConnectedThumbStick})},function(n,e,t){"use strict";t.r(e),t.d(e,"ThumbStick",function(){return p}),t.d(e,"ConnectedThumbStick",function(){return m});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(1),c=t(272);t(331);function u(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const l="THUMB_STICK_POSITION_CHANGE";class p extends r.a.Component{constructor(n){super(n),u(this,"updateArea",()=>{const{left:n,right:e,top:t,bottom:a,width:r}=this.areaRef.current.getBoundingClientRect();this.setState({areaRadius:r/2,areaX:(n+e)/2,areaY:(t+a)/2})}),u(this,"moveStick",n=>{const{areaRadius:e,areaX:t,areaY:a}=this.state,r=new s.Vector2(n.clientX-t,n.clientY-a),i=r.magnitude;i>e&&r.multiplyNumber(e/i),this.setState({controlPosition:{transform:`translateX(${r.x}px) translateY(${r.y}px)`}}),r.multiplyNumber(1/r.magnitude),this.onMove(r.x,r.y)}),u(this,"resetStick",()=>{this.setState({controlPosition:{}}),this.onMove(0,0)}),u(this,"onPointerMove",n=>{this.moveStick(n)}),u(this,"onPointerDown",n=>{this.areaRef.current.setPointerCapture(n.pointerId),this.areaRef.current.addEventListener("pointermove",this.onPointerMove),this.moveStick(n)}),u(this,"onPointerUp",()=>{this.areaRef.current.removeEventListener("pointermove",this.onPointerMove),this.resetStick()}),u(this,"onMove",(n,e)=>{this.props.pushMessage({type:l,x:n,y:e}),this.props.onMove(n,e)}),this.areaRef=r.a.createRef(),this.state={controlPosition:{}}}componentDidMount(){this.updateArea(),window.addEventListener("resize",this.updateArea)}componentWillUnmount(){window.removeEventListener("resize",this.updateArea)}render(){const{className:n}=this.props,{controlPosition:e}=this.state;return r.a.createElement("div",{className:`thumb-stick ${n}`,ref:this.areaRef,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp},r.a.createElement("div",{className:"thumb-stick__control",style:e}))}}p.defaultProps={className:"",onMove:()=>{}},p.propTypes={className:o.a.string,onMove:o.a.func,pushMessage:o.a.func};const m=Object(c.withGame)(p)},function(n,e,t){var a=t(288),r=t(332);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".thumb-stick {\n    position: relative;\n\n    width: 15vw;\n    height: 15vw;\n\n    max-width: 150px;\n    max-height: 150px;\n\n    min-width: 120px;\n    min-height: 120px;\n\n    box-sizing: border-box;\n    border: 4px solid #fff;\n    border-radius: 50%;\n\n    touch-action: none;\n    \n}\n\n.thumb-stick__control {\n    position: absolute;\n    top: 30%;\n    left: 30%;\n\n    width: 40%;\n    height: 40%;\n\n    background-color: #fff;\n    border-radius: 50%;\n\n    will-change: transform;\n\n    pointer-events: none;\n}\n\n@media screen and (max-height: 350px) {\n    .thumb-stick {\n        width: 110px;\n        height: 110px;\n\n        min-width: unset;\n        min-height: unset;\n    }\n}\n",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(334);t.d(e,"ControlButton",function(){return a.ControlButtonMemoized})},function(n,e,t){"use strict";t.r(e),t.d(e,"ControlButtonMemoized",function(){return u});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(272);t(335);const c=({className:n,onClick:e,icon:t,size:a})=>r.a.createElement(s.IconButton,{className:`control-button control-button_${a} ${n}`,onPointerUp:e,icon:t});c.defaultProps={className:"",onClick:()=>{},size:"md"},c.propTypes={className:o.a.string,onClick:o.a.func,icon:o.a.string,size:o.a.oneOf(["md","lg"])};const u=r.a.memo(c)},function(n,e,t){var a=t(288),r=t(336);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".control-button {\n  border: 4px solid white;\n  border-radius: 50%;\n}\n\n.control-button_lg {\n  width: 128px;\n  height: 128px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .control-button_md {\n    width: 72px;\n    height: 72px;\n  }\n\n  .control-button_lg {\n    width: 96px;\n    height: 96px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .control-button_md {\n    width: 64px;\n    height: 64px;\n  }\n\n  .control-button_lg {\n    width: 80px;\n    height: 80px;\n  }\n}\n",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(338);t.d(e,"MenuButton",function(){return a.MenuButtonMemoized})},function(n,e,t){"use strict";t.r(e),t.d(e,"MenuButton",function(){return c}),t.d(e,"MenuButtonMemoized",function(){return u});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(272);t(339);const c=({className:n,onClick:e,icon:t})=>r.a.createElement(s.IconButton,{className:`menu-button ${n}`,onPointerUp:e,icon:t});c.defaultProps={className:"",onClick:()=>{}},c.propTypes={className:o.a.string,onClick:o.a.func,icon:o.a.string};const u=r.a.memo(c)},function(n,e,t){var a=t(288),r=t(340);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".menu-button {\n    width: 96px;\n    height: 96px;\n\n    border: 4px solid white;\n    border-radius: 4px;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .menu-button {\n    width: 72px;\n    height: 72px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .menu-button {\n    width: 64px;\n    height: 64px;\n  }\n}\n",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(342);t.d(e,"ItemsBar",function(){return a.ItemsBar})},function(n,e,t){"use strict";t.r(e),t.d(e,"ItemsBar",function(){return d});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(272),c=t(311),u=t.n(c),l=t(312),p=t.n(l);t(343);const m={healPotion:{icon:u.a},powerPotion:{icon:p.a}},d=({className:n,items:e,onUseItem:t})=>{const i=Object(a.useCallback)(n=>{if(e[n])return r.a.createElement("li",{className:"items-bar-touch__item",key:n},r.a.createElement(s.IconButton,{className:"items-bar-touch__icon-button",onPointerUp:e=>t(e,n),icon:m[n].icon}),r.a.createElement("span",{className:"items-bar-touch__counter"},e[n]))},[e,t]),o=Object(a.useCallback)(()=>Object.keys(m).reduce((n,e)=>{const t=i(e);return t?(n.push(t),n):n},[]),[i]);return r.a.createElement("ul",{className:`items-bar-touch ${n}`},o())};d.defaultProps={className:""},d.propTypes={className:o.a.string,items:o.a.object,onUseItem:o.a.func}},function(n,e,t){var a=t(288),r=t(344);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".items-bar-touch {\n  display: flex;\n  flex-direction: column;\n\n  padding: 0;\n  margin: 0;\n\n  list-style: none;\n}\n\n.items-bar-touch__item {\n  position: relative;\n}\n\n.items-bar-touch__item + .items-bar-touch__item {\n  margin-top: 10px;\n}\n\n.items-bar-touch__icon-button {\n  width: 64px;\n  height: 64px;\n\n  border: 4px solid white;\n  border-radius: 50%;\n\n  padding: 8px;\n}\n\n.items-bar-touch__counter {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 24px;\n  height: 24px;\n\n  background-color: #fff;\n  border-radius: 50%;\n}\n\n@media screen and (max-height: 481px), screen and (max-width: 768px) {\n  .items-bar-touch__icon-button {\n    width: 48px;\n    height: 48px;\n\n    padding: 6px;\n  }\n\n  .items-bar-touch__counter {\n    width: 16px;\n    height: 16px;\n\n    font-size: 14px;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .items-bar-touch__icon-button {\n    width: 42px;\n    height: 42px;\n  }\n}",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(346);t.d(e,"MainMenu",function(){return a.WrappedMainMenu})},function(n,e,t){"use strict";t.r(e),t.d(e,"MainMenu",function(){return m}),t.d(e,"WrappedMainMenu",function(){return d});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(272),c=t(347),u=t(348);t(349);const l="LOAD_SCENE",p="game";class m extends r.a.Component{onPlay(){this.props.pushMessage({type:l,name:p})}render(){return r.a.createElement("div",{className:"main-menu"},r.a.createElement("main",{className:"main-menu__main"},r.a.createElement("header",{className:"main-menu__header"},r.a.createElement("h1",{className:"main-menu__title"},"Infinite Battle")),r.a.createElement("nav",{className:"main-menu__menu menu"},r.a.createElement("ul",{className:"menu__list"},r.a.createElement("li",{className:"menu__item"},r.a.createElement(s.Button,{className:"menu__button",title:"Play",onClick:()=>this.onPlay()}))))),r.a.createElement("footer",{className:"main-menu__footer"},r.a.createElement("ul",{className:"main-menu__socials socials"},r.a.createElement("li",{className:"socials__item"},r.a.createElement("a",{className:"socials__link socials__link_github",href:"https://github.com/michailRemmele/ludum-dare-47",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(c.default,{className:"socials__icon"}))),r.a.createElement("li",{className:"socials__item"},r.a.createElement("a",{className:"socials__link socials__link_telegram",href:"https://t.me/misha_pishet_dvizhok",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(u.default,{className:"socials__icon"}))))))}}m.propTypes={pushMessage:o.a.func};const d=Object(s.withGame)(m)},function(n,e,t){"use strict";t.r(e);var a=t(243);function r(){return(r=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n}).apply(this,arguments)}var i=a.createElement("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"});e.default=function(n){return a.createElement("svg",r({viewBox:"0 0 24 24"},n),i)}},function(n,e,t){"use strict";t.r(e);var a=t(243);function r(){return(r=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n}).apply(this,arguments)}var i=a.createElement("path",{d:"M23.91 3.79L20.3 20.84c-.25 1.21-.98 1.5-2 .94l-5.5-4.07-2.66 2.57c-.3.3-.55.56-1.1.56-.72 0-.6-.27-.84-.95L6.3 13.7.85 12c-1.18-.35-1.19-1.16.26-1.75l21.26-8.2c.97-.43 1.9.24 1.53 1.73z"});e.default=function(n){return a.createElement("svg",r({viewBox:"0 0 24 24"},n),i)}},function(n,e,t){var a=t(288),r=t(350);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".main-menu {\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n  height: 100%;\n\n  background-color: #000;\n\n  font-family: sans-serif;\n\n  box-sizing: border-box;\n  padding: 0 env(safe-area-inset-right) 0 env(safe-area-inset-left);\n}\n\n.main-menu__main {\n  flex: 1;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.main-menu__header {\n  margin-bottom: 40px;\n}\n\n.main-menu__title {\n  margin: 0;\n  color: #fff;\n\n  font-size: 48px;\n}\n\n.menu__list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.menu__item + .menu__item {\n  margin-top: 15px;\n}\n\n.menu__button {\n  width: 200px;\n}\n\n.main-menu__footer {\n  margin: 15px 20px;\n}\n\n.socials {\n  display: flex;\n  justify-content: flex-end;\n\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.socials__item {\n  margin: 5px;\n}\n\n.socials__item + .socials__item {\n  margin-left: 10px;\n}\n\n.socials__link {\n  display: block;\n}\n\n.socials__icon {\n  display: block;\n\n  width: 20px;\n  height: 20px;\n  fill: #fff;\n}",""]),e.default=r},function(n,e,t){"use strict";t.r(e);var a=t(352);t.d(e,"Game",function(){return a.WrappedGame})},function(n,e,t){"use strict";t.r(e),t.d(e,"Game",function(){return G}),t.d(e,"WrappedGame",function(){return j});var a=t(243),r=t.n(a),i=t(256),o=t.n(i),s=t(272),c=t(327),u=t(317),l=(t(353),t(355)),p=t.n(l),m=t(356),d=t.n(m),h=t(357),f=t.n(h);function g(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const _="VICTORY",b="DEFEAT",x="TOGGLE_INVENTORY",v="CLOSE_INVENTORY",y="LOAD_SCENE",w="CRAFT_RECIPE",k="GRAB",E="ATTACK",N="game",C="mainMenu",B="canGrab",M="inventory",O="timeOfDay",P="1",I="health",S={GAME:"game",VICTORY:"victory",DEFEAT:"defeat",INVENTORY:"inventory"};class G extends r.a.Component{constructor(n){super(n),g(this,"onCollectItem",n=>{n.stopPropagation(),this.props.pushMessage({type:k,id:this.state.gameObjectId,gameObject:this.state.gameObject})}),g(this,"onInventoryToggle",n=>{n&&n.stopPropagation(),this.props.pushMessage({type:x})}),g(this,"onCraft",n=>{this.props.pushMessage({type:w,recipe:n})}),g(this,"onAttack",()=>{this.props.pushMessage({type:E,id:this.state.gameObjectId,gameObject:this.state.gameObject})}),this.state={pageState:S.GAME},this.renderStateStrategy={[S.GAME]:()=>this.renderHud(),[S.VICTORY]:()=>r.a.createElement(r.a.Fragment,null,this.renderHud(),r.a.createElement("div",{className:"game__overlay"},this.renderVictoryDialog())),[S.DEFEAT]:()=>r.a.createElement(r.a.Fragment,null,this.renderHud(),r.a.createElement("div",{className:"game__overlay"},this.renderDefeatDialog())),[S.INVENTORY]:()=>r.a.createElement(r.a.Fragment,null,this.renderHud(),r.a.createElement("div",{className:"game__overlay"},r.a.createElement(s.Inventory,{className:"game__inventory",healGrass:this.state.healGrass,ogreGrass:this.state.ogreGrass,boomGrass:this.state.boomGrass,onCraft:this.onCraft,onLeave:this.onInventoryToggle})))},this.messageBusSubscription=this.onMessageBusUpdate.bind(this),this.storeSubscription=this.onStoreUpdate.bind(this),this.playerSubscription=this.onPlayerUpdate.bind(this)}componentDidMount(){this.props.messageBusObserver.subscribe(this.messageBusSubscription),this.props.storeObserver.subscribe(this.storeSubscription),this.props.gameObjects.subscribe(this.playerSubscription,P)}componentWillUnmount(){this.props.messageBusObserver.unsubscribe(this.messageBusSubscription),this.props.storeObserver.unsubscribe(this.storeSubscription),this.props.gameObjects.unsubscribe(this.playerSubscription,P)}onStoreUpdate(n){const e=n.get(B);!!e.size!==this.state.canGrab&&this.setState({canGrab:!!e.size});const{healGrass:t,ogreGrass:a,boomGrass:r}=n.get(M);t===this.state.healGrass&&a===this.state.ogreGrass&&r===this.state.boomGrass||this.setState({healGrass:t,ogreGrass:a,boomGrass:r});const i=n.get(O).getDays();i!==this.state.days&&this.setState({days:i})}onMessageBusUpdate(n){n.get(_)?this.setState({pageState:S.VICTORY}):n.get(b)&&this.setState({pageState:S.DEFEAT});const e=this.state.pageState;n.get(x)&&e===S.GAME?this.setState({pageState:S.INVENTORY}):(n.get(x)||n.get(v))&&e===S.INVENTORY&&this.setState({pageState:S.GAME})}onPlayerUpdate(n){if(!n)return void this.setState({health:0,maxHealth:0});const e=n.getComponent(I),t={};e.points===this.state.health&&e.maxPoints===this.state.maxHealth||(t.health=e.points,t.maxHealth=e.maxPoints);const a=n.getId();a!==this.state.gameObjectId&&(t.gameObjectId=a,t.gameObject=n),Object.keys(t).length&&this.setState(t)}onRestart(){this.props.pushMessage({type:y,name:N})}onMainMenu(){this.props.pushMessage({type:y,name:C})}renderActionBar(){if(this.state.canGrab)return r.a.createElement(u.ActionBar,{className:"game__action-bar",onClick:this.onCollectItem,keyName:"E",title:"Collect"})}renderDialog(n){return r.a.createElement("div",{className:"game__dialog dialog"},r.a.createElement("h2",{className:"dialog__title"},n),r.a.createElement("p",{className:"dialog__description"},"You survived ",this.state.days," days"),r.a.createElement("footer",{className:"dialog__footer"},r.a.createElement(s.Button,{className:"dialog__button",title:"Restart",onClick:()=>this.onRestart()}),r.a.createElement(s.Button,{className:"dialog__button",title:"Main menu",onClick:()=>this.onMainMenu()})))}renderDefeatDialog(){return this.renderDialog("Defeat")}renderVictoryDialog(){return this.renderDialog("Victory")}renderHud(){return this.props.touchDevice?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"game__header"},r.a.createElement(s.HealthBar,{health:this.state.health,maxHealth:this.state.maxHealth}),r.a.createElement(c.MenuButton,{icon:d.a,onClick:this.onInventoryToggle})),r.a.createElement("div",{className:"game__main"},r.a.createElement(s.ItemsBarContainer,{user:this.state.gameObject})),r.a.createElement("footer",{className:"game__footer game__footer_touch"},r.a.createElement(c.ThumbStick,{className:"game__thumb-stick"}),r.a.createElement("div",{className:"game__control-bar"},this.state.canGrab&&r.a.createElement(c.ControlButton,{className:"control-bar__button control-bar__button_grab",icon:f.a,onClick:this.onCollectItem}),r.a.createElement(c.ControlButton,{className:"control-bar__button control-bar__button_attack",icon:p.a,size:"lg",onClick:this.onAttack})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"game__header"},r.a.createElement(s.HealthBar,{health:this.state.health}),r.a.createElement(u.ActionBar,{onClick:this.onInventoryToggle,keyName:"I",title:"Inventory"})),r.a.createElement("footer",{className:"game__footer"},r.a.createElement("div",{className:"game__bars"},r.a.createElement(s.ItemsBarContainer,{user:this.state.gameObject}),this.renderActionBar())))}render(){return r.a.createElement("div",{className:`game${this.props.touchDevice?" game_touch":""}`},this.renderStateStrategy[this.state.pageState]())}}G.propTypes={messageBusObserver:o.a.any,storeObserver:o.a.any,pushMessage:o.a.func,gameObjects:o.a.any,touchDevice:o.a.bool};const j=Object(s.withDeviceDetection)(Object(s.withGame)(G))},function(n,e,t){var a=t(288),r=t(354);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);n.exports=r.locals||{}},function(n,e,t){"use strict";t.r(e);var a=t(290),r=t.n(a)()(!1);r.push([n.i,".game {\n  position: relative;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  width: 100%;\n  height: 100%;\n\n  font-family: sans-serif;\n\n  box-sizing: border-box;\n  padding: 30px;\n}\n\n.game_touch {\n  padding: 2% max(2%, env(safe-area-inset-right)) 2% max(2%, env(safe-area-inset-left));\n}\n\n.game_touch * {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.game__header {\n  display: flex;\n  justify-content: space-between;\n}\n\n.game__bars {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n}\n\n.game__action-bar {\n  align-self: flex-end;\n}\n\n.game__overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.game__footer_touch {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n\n  position: relative;\n}\n\n.game__thumb-stick {\n  position: absolute;\n\n  left: 0;\n  bottom: 0;\n}\n\n.game__control-bar {\n  position: relative;\n}\n\n.control-bar__button_grab {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  top: -25%;\n  left: -25%;\n}\n\n.game__main {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.dialog {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  width: 75%;\n  max-width: 400px;\n\n  padding: 30px;\n\n  background-color: #000;\n  color: #fff;\n}\n\n.dialog__title {\n  margin: 0 0 30px 0;\n  font-size: 48px;\n\n  text-transform: uppercase;\n}\n\n.dialog__description {\n  margin: 0 0 40px 0;\n\n  font-size: 24px;\n}\n\n.dialog__footer {\n  display: flex;\n  align-items: center;\n\n  width: 100%;\n}\n\n.dialog__button + .dialog__button {\n  margin-left: 25px;\n}\n\n@media screen and (max-width: 768px) {\n  .game:not(.game_touch) {\n    padding: 20px;\n  }\n\n  .dialog {\n    padding: 20px;\n  }\n\n  .dialog__title {\n    font-size: 36px;\n    margin: 0 0 20px 0;\n  }\n\n  .dialog__description {\n    margin: 0 0 20px 0;\n  }\n\n  .dialog__footer {\n    flex-direction: column;\n  }\n\n  .dialog__button + .dialog__button {\n    margin: 15px 0 0 0;\n  }\n}\n\n@media screen and (max-height: 350px) {\n  .dialog {\n    height: 100%;\n  }\n}\n",""]),e.default=r},function(n,e,t){n.exports=t.p+"images/27805ddbba90aab493f08b5ce90e46e2-attack-icon.png"},function(n,e,t){n.exports=t.p+"images/f666576798144fb6e3e7c0788859b83e-inventory-icon.png"},function(n,e,t){n.exports=t.p+"images/f5e5c353438088b3025ea792b8c8e952-grab-icon.png"}])]);